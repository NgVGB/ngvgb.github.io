(function($,Oe){typeof exports=="object"&&typeof module!="undefined"?Oe(exports):typeof define=="function"&&define.amd?define(["exports"],Oe):($=typeof globalThis!="undefined"?globalThis:$||self,Oe($.Cmssdk={}))})(this,function($){"use strict";var Oe=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},rt={exports:{}};(function(r,o){(function(s,c){var p="1.0.2",g="",m="?",C="function",L="undefined",A="object",P="string",M="major",v="model",O="name",E="type",_="vendor",x="version",Q="architecture",te="console",h="mobile",d="tablet",w="smarttv",I="wearable",q="embedded",se=255,ne="Amazon",K="Apple",le="ASUS",_e="BlackBerry",be="Browser",Re="Chrome",At="Edge",He="Firefox",Fe="Google",Ie="Huawei",Be="LG",Pe="Microsoft",Ze="Motorola",We="Opera",Xe="Samsung",Ye="Sony",Qe="Xiaomi",Te="Zebra",Ve="Facebook",we=function(W,Z){var B={};for(var ce in W)Z[ce]&&Z[ce].length%2===0?B[ce]=Z[ce].concat(W[ce]):B[ce]=W[ce];return B},ke=function(W){for(var Z={},B=0;B<W.length;B++)Z[W[B].toUpperCase()]=W[B];return Z},et=function(W,Z){return typeof W===P?Ne(Z).indexOf(Ne(W))!==-1:!1},Ne=function(W){return W.toLowerCase()},It=function(W){return typeof W===P?W.replace(/[^\d\.]/g,g).split(".")[0]:c},Je=function(W,Z){if(typeof W===P)return W=W.replace(/^\s\s*/,g).replace(/\s\s*$/,g),typeof Z===L?W:W.substring(0,se)},Ue=function(W,Z){for(var B=0,ce,X,pe,k,ye,ve;B<Z.length&&!ye;){var xe=Z[B],De=Z[B+1];for(ce=X=0;ce<xe.length&&!ye;)if(ye=xe[ce++].exec(W),ye)for(pe=0;pe<De.length;pe++)ve=ye[++X],k=De[pe],typeof k===A&&k.length>0?k.length===2?typeof k[1]==C?this[k[0]]=k[1].call(this,ve):this[k[0]]=k[1]:k.length===3?typeof k[1]===C&&!(k[1].exec&&k[1].test)?this[k[0]]=ve?k[1].call(this,ve,k[2]):c:this[k[0]]=ve?ve.replace(k[1],k[2]):c:k.length===4&&(this[k[0]]=ve?k[3].call(this,ve.replace(k[1],k[2])):c):this[k]=ve||c;B+=2}},ae=function(W,Z){for(var B in Z)if(typeof Z[B]===A&&Z[B].length>0){for(var ce=0;ce<Z[B].length;ce++)if(et(Z[B][ce],W))return B===m?c:B}else if(et(Z[B],W))return B===m?c:B;return W},kt={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},gt={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},tt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[x,[O,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[x,[O,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[O,x],[/opios[\/ ]+([\w\.]+)/i],[x,[O,We+" Mini"]],[/\bopr\/([\w\.]+)/i],[x,[O,We]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[O,x],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[x,[O,"UC"+be]],[/\bqbcore\/([\w\.]+)/i],[x,[O,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[x,[O,"WeChat"]],[/konqueror\/([\w\.]+)/i],[x,[O,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[x,[O,"IE"]],[/yabrowser\/([\w\.]+)/i],[x,[O,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[O,/(.+)/,"$1 Secure "+be],x],[/\bfocus\/([\w\.]+)/i],[x,[O,He+" Focus"]],[/\bopt\/([\w\.]+)/i],[x,[O,We+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[x,[O,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[x,[O,"Dolphin"]],[/coast\/([\w\.]+)/i],[x,[O,We+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[x,[O,"MIUI "+be]],[/fxios\/([-\w\.]+)/i],[x,[O,He]],[/\bqihu|(qi?ho?o?|360)browser/i],[[O,"360 "+be]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[O,/(.+)/,"$1 "+be],x],[/(comodo_dragon)\/([\w\.]+)/i],[[O,/_/g," "],x],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[O,x],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[O],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[O,Ve],x],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[O,x],[/\bgsa\/([\w\.]+) .*safari\//i],[x,[O,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[x,[O,Re+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[O,Re+" WebView"],x],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[x,[O,"Android "+be]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[O,x],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[x,[O,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[x,O],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[O,[x,ae,kt]],[/(webkit|khtml)\/([\w\.]+)/i],[O,x],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[O,"Netscape"],x],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[x,[O,He+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[O,x]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[Q,"amd64"]],[/(ia32(?=;))/i],[[Q,Ne]],[/((?:i[346]|x)86)[;\)]/i],[[Q,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[Q,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[Q,"armhf"]],[/windows (ce|mobile); ppc;/i],[[Q,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[Q,/ower/,g,Ne]],[/(sun4\w)[;\)]/i],[[Q,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[Q,Ne]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[v,[_,Xe],[E,d]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[v,[_,Xe],[E,h]],[/\((ip(?:hone|od)[\w ]*);/i],[v,[_,K],[E,h]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[v,[_,K],[E,d]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[v,[_,Ie],[E,d]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[v,[_,Ie],[E,h]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[v,/_/g," "],[_,Qe],[E,h]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[v,/_/g," "],[_,Qe],[E,d]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[v,[_,"OPPO"],[E,h]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[v,[_,"Vivo"],[E,h]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[v,[_,"Realme"],[E,h]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[v,[_,Ze],[E,h]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[v,[_,Ze],[E,d]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[v,[_,Be],[E,d]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[v,[_,Be],[E,h]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[v,[_,"Lenovo"],[E,d]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[v,/_/g," "],[_,"Nokia"],[E,h]],[/(pixel c)\b/i],[v,[_,Fe],[E,d]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[v,[_,Fe],[E,h]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[v,[_,Ye],[E,h]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[v,"Xperia Tablet"],[_,Ye],[E,d]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[v,[_,"OnePlus"],[E,h]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[v,[_,ne],[E,d]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[v,/(.+)/g,"Fire Phone $1"],[_,ne],[E,h]],[/(playbook);[-\w\),; ]+(rim)/i],[v,_,[E,d]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[v,[_,_e],[E,h]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[v,[_,le],[E,d]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[v,[_,le],[E,h]],[/(nexus 9)/i],[v,[_,"HTC"],[E,d]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[_,[v,/_/g," "],[E,h]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[v,[_,"Acer"],[E,d]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[v,[_,"Meizu"],[E,h]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[v,[_,"Sharp"],[E,h]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[_,v,[E,h]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[_,v,[E,d]],[/(surface duo)/i],[v,[_,Pe],[E,d]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[v,[_,"Fairphone"],[E,h]],[/(u304aa)/i],[v,[_,"AT&T"],[E,h]],[/\bsie-(\w*)/i],[v,[_,"Siemens"],[E,h]],[/\b(rct\w+) b/i],[v,[_,"RCA"],[E,d]],[/\b(venue[\d ]{2,7}) b/i],[v,[_,"Dell"],[E,d]],[/\b(q(?:mv|ta)\w+) b/i],[v,[_,"Verizon"],[E,d]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[v,[_,"Barnes & Noble"],[E,d]],[/\b(tm\d{3}\w+) b/i],[v,[_,"NuVision"],[E,d]],[/\b(k88) b/i],[v,[_,"ZTE"],[E,d]],[/\b(nx\d{3}j) b/i],[v,[_,"ZTE"],[E,h]],[/\b(gen\d{3}) b.+49h/i],[v,[_,"Swiss"],[E,h]],[/\b(zur\d{3}) b/i],[v,[_,"Swiss"],[E,d]],[/\b((zeki)?tb.*\b) b/i],[v,[_,"Zeki"],[E,d]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[_,"Dragon Touch"],v,[E,d]],[/\b(ns-?\w{0,9}) b/i],[v,[_,"Insignia"],[E,d]],[/\b((nxa|next)-?\w{0,9}) b/i],[v,[_,"NextBook"],[E,d]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[_,"Voice"],v,[E,h]],[/\b(lvtel\-)?(v1[12]) b/i],[[_,"LvTel"],v,[E,h]],[/\b(ph-1) /i],[v,[_,"Essential"],[E,h]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[v,[_,"Envizen"],[E,d]],[/\b(trio[-\w\. ]+) b/i],[v,[_,"MachSpeed"],[E,d]],[/\btu_(1491) b/i],[v,[_,"Rotor"],[E,d]],[/(shield[\w ]+) b/i],[v,[_,"Nvidia"],[E,d]],[/(sprint) (\w+)/i],[_,v,[E,h]],[/(kin\.[onetw]{3})/i],[[v,/\./g," "],[_,Pe],[E,h]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[v,[_,Te],[E,d]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[v,[_,Te],[E,h]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[_,v,[E,te]],[/droid.+; (shield) bui/i],[v,[_,"Nvidia"],[E,te]],[/(playstation [345portablevi]+)/i],[v,[_,Ye],[E,te]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[v,[_,Pe],[E,te]],[/smart-tv.+(samsung)/i],[_,[E,w]],[/hbbtv.+maple;(\d+)/i],[[v,/^/,"SmartTV"],[_,Xe],[E,w]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[_,Be],[E,w]],[/(apple) ?tv/i],[_,[v,K+" TV"],[E,w]],[/crkey/i],[[v,Re+"cast"],[_,Fe],[E,w]],[/droid.+aft(\w)( bui|\))/i],[v,[_,ne],[E,w]],[/\(dtv[\);].+(aquos)/i],[v,[_,"Sharp"],[E,w]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[_,Je],[v,Je],[E,w]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[E,w]],[/((pebble))app/i],[_,v,[E,I]],[/droid.+; (glass) \d/i],[v,[_,Fe],[E,I]],[/droid.+; (wt63?0{2,3})\)/i],[v,[_,Te],[E,I]],[/(quest( 2)?)/i],[v,[_,Ve],[E,I]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[_,[E,q]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[v,[E,h]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[v,[E,d]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[E,d]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[E,h]],[/(android[-\w\. ]{0,9});.+buil/i],[v,[_,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[x,[O,At+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[x,[O,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[O,x],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[x,O]],os:[[/microsoft (windows) (vista|xp)/i],[O,x],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[O,[x,ae,gt]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[O,"Windows"],[x,ae,gt]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[x,/_/g,"."],[O,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[O,"Mac OS"],[x,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[x,O],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[O,x],[/\(bb(10);/i],[x,[O,_e]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[x,[O,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[x,[O,He+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[x,[O,"webOS"]],[/crkey\/([\d\.]+)/i],[x,[O,Re+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[O,"Chromium OS"],x],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[O,x],[/(sunos) ?([\w\.\d]*)/i],[[O,"Solaris"],x],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[O,x]]},he=function(W,Z){if(typeof W===A&&(Z=W,W=c),!(this instanceof he))return new he(W,Z).getResult();var B=W||(typeof s!==L&&s.navigator&&s.navigator.userAgent?s.navigator.userAgent:g),ce=Z?we(tt,Z):tt;return this.getBrowser=function(){var X={};return X[O]=c,X[x]=c,Ue.call(X,B,ce.browser),X.major=It(X.version),X},this.getCPU=function(){var X={};return X[Q]=c,Ue.call(X,B,ce.cpu),X},this.getDevice=function(){var X={};return X[_]=c,X[v]=c,X[E]=c,Ue.call(X,B,ce.device),X},this.getEngine=function(){var X={};return X[O]=c,X[x]=c,Ue.call(X,B,ce.engine),X},this.getOS=function(){var X={};return X[O]=c,X[x]=c,Ue.call(X,B,ce.os),X},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return B},this.setUA=function(X){return B=typeof X===P&&X.length>se?Je(X,se):X,this},this.setUA(B),this};he.VERSION=p,he.BROWSER=ke([O,x,M]),he.CPU=ke([Q]),he.DEVICE=ke([v,_,E,te,h,w,d,I,q]),he.ENGINE=he.OS=ke([O,x]),r.exports&&(o=r.exports=he),o.UAParser=he;var Me=typeof s!==L&&(s.jQuery||s.Zepto);if(Me&&!Me.ua){var Ge=new he;Me.ua=Ge.getResult(),Me.ua.get=function(){return Ge.getUA()},Me.ua.set=function(W){Ge.setUA(W);var Z=Ge.getResult();for(var B in Z)Me.ua[B]=Z[B]}}})(typeof window=="object"?window:Oe)})(rt,rt.exports);function Sn(r=""){return/^\w+([\.]?[\w-]+)*@\w+([\.]?[\w-]+)*(\.\w{2,4})+$/.test(r)}function st(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)}function Mt(){return rt.exports.UAParser(navigator.userAgent).os}var Dt=`table {\r
  display: block;\r
  overflow-x: auto;\r
  white-space: nowrap;\r
  border-width: unset;\r
  border-spacing: unset;\r
  border-style: unset;\r
  max-width: none;\r
	-webkit-overflow-scrolling: touch;\r
}\r
/* \u79FB\u52A8\u7AEFtable\u5DE6\u53F3\u6ED1\u52A8 */`,jt=`html::-webkit-scrollbar {\r
  display: none; /* Chrome Safari */\r
}\r
html {\r
  scrollbar-width: none; /* firefox */\r
  -ms-overflow-style: none; /* IE 10+ */\r
  overflow-x: hidden;\r
  overflow-y: hidden;\r
}\r
table::-webkit-scrollbar {\r
  display: none; /* Chrome Safari */\r
}\r
img {\r
  max-width: 100%;\r
  object-fit: contain;\r
}\r
iframe {\r
  max-width: 100%;\r
}\r
`;function _t(r,o){const s=document.createElement(r);return o&&Object.keys(o).forEach(c=>{s.setAttribute(c,String(o[c]))}),s}function Et(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(2,10)}function Tn(r){const o=/<\/?.+?\/?>/g,s=/^<h1(.+)<\/h1>/.test(r),c=Et();return{content:r.replace(o,""),tag:s?"h1":"h2",origin:r,id:c}}function qt(r){var o,s,c;return(((c=(s=(o=r.contentWindow)===null||o===void 0?void 0:o.document)===null||s===void 0?void 0:s.body)===null||c===void 0?void 0:c.scrollHeight)||0)+20}function xn(r){const o=/<h[1-2](.+)<\/h[1-2]>/g,s=r.match(o),c=(s==null?void 0:s.map(Tn))||[];let p=r;return c==null||c.forEach(g=>{const{origin:m,id:C,tag:L}=g,A=m.replace(new RegExp(`<${L}`),`<${L} id="${C}"`);p=p.replace(m,A)}),{menu:c,result:p}}function at(r){const{container:o,idocu:s}=r;if(!o)return;const c=o.querySelectorAll("[data-href]");c==null||c.forEach(p=>{p.addEventListener("click",()=>{const g=p.getAttribute("data-href"),[m,C]=g.split("#"),L=s==null?void 0:s.getElementById(C);L==null||L.scrollIntoView({behavior:"smooth"})})})}function Rt(r){const o=r.querySelectorAll("a");if(o==null||o.forEach(c=>{c.addEventListener("click",p=>{var g;p.stopPropagation(),p.preventDefault();const m=p.target,C=m.href||((g=m==null?void 0:m.parentElement)===null||g===void 0?void 0:g.href);C&&window.open(C,"_blank")})}),st()){const c=p=>{p==null||p.forEach(g=>{g.removeAttribute("width"),g.removeAttribute("height"),g.style.width="100%",g.tagName.toLowerCase()==="table"&&(g.style.maxWidth="100%")})};c(r.querySelectorAll("table")),c(r.querySelectorAll("img")),c(r.querySelectorAll("video")),c(r.querySelectorAll("iframe"))}at({container:r,idocu:document});const s=r.querySelectorAll("[data-href]");s==null||s.forEach(c=>{c.addEventListener("click",()=>{const p=c.getAttribute("data-href"),[g,m]=p.split("#"),C=r.getElementById(m);C==null||C.scrollIntoView({behavior:"smooth"})})})}function Ht(r,o){const{target:s,styleText:c}=o,p=s.attachShadow({mode:"open"});p.innerHTML=ut(r);const g=document.createElement("style");return g.textContent=(c!=null?c:"")+jt+(st()?Dt:""),p.appendChild(g),Rt(p),p}function Ft(r,o){return new Promise((s,c)=>{var p;const g=document.createElement("iframe");let m=ut(r);o!=null&&o.script&&(m=`<script>${o==null?void 0:o.script}<\/script>${m}`),m=`<style>${((o==null?void 0:o.styleText)||"")+jt+(st()?Dt:"")}</style>${m}`;const L=()=>{g.setAttribute("style",`height:${qt(g)}px; width: 100%; border: none; max-width: 100%;`)},A=()=>{g.removeEventListener("resize",L)};g.srcdoc=m,L();const P=setInterval(L,100);g.onload=()=>{var M;clearInterval(P);const v=(M=g.contentWindow)===null||M===void 0?void 0:M.document.body;if(v!=null&&v.scrollHeight&&L(),!v)return;new ResizeObserver(L).observe(v),document.addEventListener("resize",L),v.addEventListener("resize",L),Rt(g.contentWindow.document),s({iframe:g,resize:L,destory:A})},g.onerror=c,o!=null&&o.target?(p=o==null?void 0:o.target)===null||p===void 0||p.appendChild(g):s({iframe:g,resize:L,destory:A})})}function ct(r=new Date,o){const s=L=>{let A=String(L);return A.length===1&&(A=`0${A}`),A},c=/^\d{10,13}$/.test(`${r}`)?new Date(`${r}`.length===10?parseInt(`${r}`,10)*1e3:r):r,p=c.getHours().toString(),g=c.getMinutes().toString(),m=c.getSeconds().toString(),C=`${p.length===2?p:`0${p}`}:${g.length===2?g:`0${g}`}:${m.length===2?m:`0${m}`}`;return`${[c.getFullYear(),s(c.getMonth()+1),s(c.getDate())].join(o||"-")} ${C}`}function ut(r="",o="-"){return r.replace(/(&lt;|<):timestamp( format=\(([^)]+)\))? value=\((\d{10,13})\)(&gt;|>)/g,(...s)=>{const[c,p,g,m,C]=s,L=new Date(parseInt(C.length===13?C:`${C}000`,10));if(!g||!m)return ct(L,o);const[A,P,M,v,O,E]=ct(L,"-").split(/-| |:/);return m.replace(/YYYY/g,A).replace(/MM/g,P).replace(/DD/g,M).replace(/HH/g,v).replace(/mm/g,O).replace(/ss/g,E)})}function Ln(r,o){const s=new Date(r),[c,p,g,m,C,L]=ct(s,"-").split(/-| |:/);return o.replace(/YYYY/g,c).replace(/MM/g,p).replace(/DD/g,g).replace(/HH/g,m).replace(/mm/g,C).replace(/ss/g,L)}function An(r){return new DOMParser().parseFromString(r,"text/html").documentElement.textContent}function Ot(r,o){return new Promise((s,c)=>{const p=document.getElementsByTagName("head")[0],g=document.createElement("script");g.type="text/javascript",g.src=r,o&&Object.keys(o).forEach(L=>{g[L]=o[L]}),p.appendChild(g);const m=L=>{g.removeEventListener("load",m),s(L)},C=L=>{g.removeEventListener("error",C),c(L)};g.addEventListener("load",m),g.addEventListener("error",C),g.addEventListener("abort",C)})}function St(r){if(r instanceof HTMLElement)return r;if(typeof r=="string"){const s=document.querySelector(r);if(s instanceof HTMLElement)return s;throw new Error(`Not found element: ${r}`)}const o=document.createElement("div");return document.body.appendChild(o),o}function Bt(r){return(...o)=>(r._promise_||(r._promise_=r(...o),r._promise_.catch(()=>{}).then(()=>{r._promise_=null})),r._promise_)}function Ae(r,o){return(o||new URLSearchParams(location.search)).get(r)}var lt={exports:{}};(function(r,o){(function(s,c){c()})(Oe,function(){function s(A,P){return typeof P=="undefined"?P={autoBom:!1}:typeof P!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),P={autoBom:!P}),P.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(A.type)?new Blob(["\uFEFF",A],{type:A.type}):A}function c(A,P,M){var v=new XMLHttpRequest;v.open("GET",A),v.responseType="blob",v.onload=function(){L(v.response,P,M)},v.onerror=function(){console.error("could not download file")},v.send()}function p(A){var P=new XMLHttpRequest;P.open("HEAD",A,!1);try{P.send()}catch{}return 200<=P.status&&299>=P.status}function g(A){try{A.dispatchEvent(new MouseEvent("click"))}catch{var P=document.createEvent("MouseEvents");P.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),A.dispatchEvent(P)}}var m=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Oe=="object"&&Oe.global===Oe?Oe:void 0,C=m.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),L=m.saveAs||(typeof window!="object"||window!==m?function(){}:"download"in HTMLAnchorElement.prototype&&!C?function(A,P,M){var v=m.URL||m.webkitURL,O=document.createElement("a");P=P||A.name||"download",O.download=P,O.rel="noopener",typeof A=="string"?(O.href=A,O.origin===location.origin?g(O):p(O.href)?c(A,P,M):g(O,O.target="_blank")):(O.href=v.createObjectURL(A),setTimeout(function(){v.revokeObjectURL(O.href)},4e4),setTimeout(function(){g(O)},0))}:"msSaveOrOpenBlob"in navigator?function(A,P,M){if(P=P||A.name||"download",typeof A!="string")navigator.msSaveOrOpenBlob(s(A,M),P);else if(p(A))c(A,P,M);else{var v=document.createElement("a");v.href=A,v.target="_blank",setTimeout(function(){g(v)})}}:function(A,P,M,v){if(v=v||open("","_blank"),v&&(v.document.title=v.document.body.innerText="downloading..."),typeof A=="string")return c(A,P,M);var O=A.type==="application/octet-stream",E=/constructor/i.test(m.HTMLElement)||m.safari,_=/CriOS\/[\d]+/.test(navigator.userAgent);if((_||O&&E||C)&&typeof FileReader!="undefined"){var x=new FileReader;x.onloadend=function(){var h=x.result;h=_?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),v?v.location.href=h:location=h,v=null},x.readAsDataURL(A)}else{var Q=m.URL||m.webkitURL,te=Q.createObjectURL(A);v?v.location=te:location.href=te,v=null,setTimeout(function(){Q.revokeObjectURL(te)},4e4)}});m.saveAs=L.saveAs=L,r.exports=L})})(lt);function In(){return!!Blob}function Wt(r,o){const s=r.split(","),c=s[0].match(/:(.*?);/)[1],p=atob(s[1]);let g=p.length;const m=new Uint8Array(g);for(;g--;)m[g]=p.charCodeAt(g);return{file:new File([m],o,{type:c}),blob:new Blob([m],{type:c})}}const kn=function(){const r=document.createElement("iframe"),o=()=>/CriOS\/[\d]+/.test(navigator.userAgent);return window.addEventListener("DOMContentLoaded",()=>{var s;r.style.display="none",(s=document.body)===null||s===void 0||s.appendChild(r)}),function(s){var c;const{base64:p,filename:g="file"}=s,{name:m,version:C}=Mt();if(m==="iOS"){const{file:L,blob:A}=Wt(p,g),P=[L];if(!r.contentWindow)throw new Error("iframe not ready");(Number(C!=null?C:0)<=13.7||o())&&lt.exports.saveAs(A,g);try{(c=r.contentWindow)===null||c===void 0||c.navigator.share({files:P}).then(()=>{var M;(M=r.contentWindow)===null||M===void 0||M.location.reload()}).catch(()=>{var M;(M=r.contentWindow)===null||M===void 0||M.location.reload(),lt.exports.saveAs(A,g)})}catch{lt.exports.saveAs(A,g)}}else{const L=document.createElement("a");L.download=g,L.href=p,L.click()}}}();/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */function re(r,o,s,c){function p(g){return g instanceof s?g:new s(function(m){m(g)})}return new(s||(s=Promise))(function(g,m){function C(P){try{A(c.next(P))}catch(M){m(M)}}function L(P){try{A(c.throw(P))}catch(M){m(M)}}function A(P){P.done?g(P.value):p(P.value).then(C,L)}A((c=c.apply(r,o||[])).next())})}var Vt=function(){if(typeof Map!="undefined")return Map;function r(o,s){var c=-1;return o.some(function(p,g){return p[0]===s?(c=g,!0):!1}),c}return function(){function o(){this.__entries__=[]}return Object.defineProperty(o.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),o.prototype.get=function(s){var c=r(this.__entries__,s),p=this.__entries__[c];return p&&p[1]},o.prototype.set=function(s,c){var p=r(this.__entries__,s);~p?this.__entries__[p][1]=c:this.__entries__.push([s,c])},o.prototype.delete=function(s){var c=this.__entries__,p=r(c,s);~p&&c.splice(p,1)},o.prototype.has=function(s){return!!~r(this.__entries__,s)},o.prototype.clear=function(){this.__entries__.splice(0)},o.prototype.forEach=function(s,c){c===void 0&&(c=null);for(var p=0,g=this.__entries__;p<g.length;p++){var m=g[p];s.call(c,m[1],m[0])}},o}()}(),Tt=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,dt=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),Cn=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(dt):function(r){return setTimeout(function(){return r(Date.now())},1e3/60)}}(),Pn=2;function Nn(r,o){var s=!1,c=!1,p=0;function g(){s&&(s=!1,r()),c&&C()}function m(){Cn(g)}function C(){var L=Date.now();if(s){if(L-p<Pn)return;c=!0}else s=!0,c=!1,setTimeout(m,o);p=L}return C}var Un=20,Mn=["top","right","bottom","left","width","height","size","weight"],Dn=typeof MutationObserver!="undefined",jn=function(){function r(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Nn(this.refresh.bind(this),Un)}return r.prototype.addObserver=function(o){~this.observers_.indexOf(o)||this.observers_.push(o),this.connected_||this.connect_()},r.prototype.removeObserver=function(o){var s=this.observers_,c=s.indexOf(o);~c&&s.splice(c,1),!s.length&&this.connected_&&this.disconnect_()},r.prototype.refresh=function(){var o=this.updateObservers_();o&&this.refresh()},r.prototype.updateObservers_=function(){var o=this.observers_.filter(function(s){return s.gatherActive(),s.hasActive()});return o.forEach(function(s){return s.broadcastActive()}),o.length>0},r.prototype.connect_=function(){!Tt||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Dn?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},r.prototype.disconnect_=function(){!Tt||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},r.prototype.onTransitionEnd_=function(o){var s=o.propertyName,c=s===void 0?"":s,p=Mn.some(function(g){return!!~c.indexOf(g)});p&&this.refresh()},r.getInstance=function(){return this.instance_||(this.instance_=new r),this.instance_},r.instance_=null,r}(),Gt=function(r,o){for(var s=0,c=Object.keys(o);s<c.length;s++){var p=c[s];Object.defineProperty(r,p,{value:o[p],enumerable:!1,writable:!1,configurable:!0})}return r},$e=function(r){var o=r&&r.ownerDocument&&r.ownerDocument.defaultView;return o||dt},zt=ht(0,0,0,0);function ft(r){return parseFloat(r)||0}function $t(r){for(var o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];return o.reduce(function(c,p){var g=r["border-"+p+"-width"];return c+ft(g)},0)}function qn(r){for(var o=["top","right","bottom","left"],s={},c=0,p=o;c<p.length;c++){var g=p[c],m=r["padding-"+g];s[g]=ft(m)}return s}function Hn(r){var o=r.getBBox();return ht(0,0,o.width,o.height)}function Fn(r){var o=r.clientWidth,s=r.clientHeight;if(!o&&!s)return zt;var c=$e(r).getComputedStyle(r),p=qn(c),g=p.left+p.right,m=p.top+p.bottom,C=ft(c.width),L=ft(c.height);if(c.boxSizing==="border-box"&&(Math.round(C+g)!==o&&(C-=$t(c,"left","right")+g),Math.round(L+m)!==s&&(L-=$t(c,"top","bottom")+m)),!Wn(r)){var A=Math.round(C+g)-o,P=Math.round(L+m)-s;Math.abs(A)!==1&&(C-=A),Math.abs(P)!==1&&(L-=P)}return ht(p.left,p.top,C,L)}var Bn=function(){return typeof SVGGraphicsElement!="undefined"?function(r){return r instanceof $e(r).SVGGraphicsElement}:function(r){return r instanceof $e(r).SVGElement&&typeof r.getBBox=="function"}}();function Wn(r){return r===$e(r).document.documentElement}function Vn(r){return Tt?Bn(r)?Hn(r):Fn(r):zt}function Gn(r){var o=r.x,s=r.y,c=r.width,p=r.height,g=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,m=Object.create(g.prototype);return Gt(m,{x:o,y:s,width:c,height:p,top:s,right:o+c,bottom:p+s,left:o}),m}function ht(r,o,s,c){return{x:r,y:o,width:s,height:c}}var zn=function(){function r(o){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=ht(0,0,0,0),this.target=o}return r.prototype.isActive=function(){var o=Vn(this.target);return this.contentRect_=o,o.width!==this.broadcastWidth||o.height!==this.broadcastHeight},r.prototype.broadcastRect=function(){var o=this.contentRect_;return this.broadcastWidth=o.width,this.broadcastHeight=o.height,o},r}(),$n=function(){function r(o,s){var c=Gn(s);Gt(this,{target:o,contentRect:c})}return r}(),Xn=function(){function r(o,s,c){if(this.activeObservations_=[],this.observations_=new Vt,typeof o!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=o,this.controller_=s,this.callbackCtx_=c}return r.prototype.observe=function(o){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(o instanceof $e(o).Element))throw new TypeError('parameter 1 is not of type "Element".');var s=this.observations_;s.has(o)||(s.set(o,new zn(o)),this.controller_.addObserver(this),this.controller_.refresh())}},r.prototype.unobserve=function(o){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(o instanceof $e(o).Element))throw new TypeError('parameter 1 is not of type "Element".');var s=this.observations_;!s.has(o)||(s.delete(o),s.size||this.controller_.removeObserver(this))}},r.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},r.prototype.gatherActive=function(){var o=this;this.clearActive(),this.observations_.forEach(function(s){s.isActive()&&o.activeObservations_.push(s)})},r.prototype.broadcastActive=function(){if(!!this.hasActive()){var o=this.callbackCtx_,s=this.activeObservations_.map(function(c){return new $n(c.target,c.broadcastRect())});this.callback_.call(o,s,o),this.clearActive()}},r.prototype.clearActive=function(){this.activeObservations_.splice(0)},r.prototype.hasActive=function(){return this.activeObservations_.length>0},r}(),Xt=typeof WeakMap!="undefined"?new WeakMap:new Vt,Yt=function(){function r(o){if(!(this instanceof r))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var s=jn.getInstance(),c=new Xn(o,s,this);Xt.set(this,c)}return r}();["observe","unobserve","disconnect"].forEach(function(r){Yt.prototype[r]=function(){var o;return(o=Xt.get(this))[r].apply(o,arguments)}});var Yn=function(){return typeof dt.ResizeObserver!="undefined"?dt.ResizeObserver:Yt}();(function(){if(typeof window!="object")return;if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype){"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});return}function r(h){try{return h.defaultView&&h.defaultView.frameElement||null}catch{return null}}var o=function(h){for(var d=h,w=r(d);w;)d=w.ownerDocument,w=r(d);return d}(window.document),s=[],c=null,p=null;function g(h){this.time=h.time,this.target=h.target,this.rootBounds=E(h.rootBounds),this.boundingClientRect=E(h.boundingClientRect),this.intersectionRect=E(h.intersectionRect||O()),this.isIntersecting=!!h.intersectionRect;var d=this.boundingClientRect,w=d.width*d.height,I=this.intersectionRect,q=I.width*I.height;w?this.intersectionRatio=Number((q/w).toFixed(4)):this.intersectionRatio=this.isIntersecting?1:0}function m(h,d){var w=d||{};if(typeof h!="function")throw new Error("callback must be a function");if(w.root&&w.root.nodeType!=1&&w.root.nodeType!=9)throw new Error("root must be a Document or Element");this._checkForIntersections=L(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=h,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(w.rootMargin),this.thresholds=this._initThresholds(w.threshold),this.root=w.root||null,this.rootMargin=this._rootMarginValues.map(function(I){return I.value+I.unit}).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}m.prototype.THROTTLE_TIMEOUT=100,m.prototype.POLL_INTERVAL=null,m.prototype.USE_MUTATION_OBSERVER=!0,m._setupCrossOriginUpdater=function(){return c||(c=function(h,d){!h||!d?p=O():p=_(h,d),s.forEach(function(w){w._checkForIntersections()})}),c},m._resetCrossOriginUpdater=function(){c=null,p=null},m.prototype.observe=function(h){var d=this._observationTargets.some(function(w){return w.element==h});if(!d){if(!(h&&h.nodeType==1))throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:h,entry:null}),this._monitorIntersections(h.ownerDocument),this._checkForIntersections()}},m.prototype.unobserve=function(h){this._observationTargets=this._observationTargets.filter(function(d){return d.element!=h}),this._unmonitorIntersections(h.ownerDocument),this._observationTargets.length==0&&this._unregisterInstance()},m.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},m.prototype.takeRecords=function(){var h=this._queuedEntries.slice();return this._queuedEntries=[],h},m.prototype._initThresholds=function(h){var d=h||[0];return Array.isArray(d)||(d=[d]),d.sort().filter(function(w,I,q){if(typeof w!="number"||isNaN(w)||w<0||w>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return w!==q[I-1]})},m.prototype._parseRootMargin=function(h){var d=h||"0px",w=d.split(/\s+/).map(function(I){var q=/^(-?\d*\.?\d+)(px|%)$/.exec(I);if(!q)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(q[1]),unit:q[2]}});return w[1]=w[1]||w[0],w[2]=w[2]||w[0],w[3]=w[3]||w[1],w},m.prototype._monitorIntersections=function(h){var d=h.defaultView;if(!!d&&this._monitoringDocuments.indexOf(h)==-1){var w=this._checkForIntersections,I=null,q=null;this.POLL_INTERVAL?I=d.setInterval(w,this.POLL_INTERVAL):(A(d,"resize",w,!0),A(h,"scroll",w,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in d&&(q=new d.MutationObserver(w),q.observe(h,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))),this._monitoringDocuments.push(h),this._monitoringUnsubscribes.push(function(){var K=h.defaultView;K&&(I&&K.clearInterval(I),P(K,"resize",w,!0)),P(h,"scroll",w,!0),q&&q.disconnect()});var se=this.root&&(this.root.ownerDocument||this.root)||o;if(h!=se){var ne=r(h);ne&&this._monitorIntersections(ne.ownerDocument)}}},m.prototype._unmonitorIntersections=function(h){var d=this._monitoringDocuments.indexOf(h);if(d!=-1){var w=this.root&&(this.root.ownerDocument||this.root)||o,I=this._observationTargets.some(function(ne){var K=ne.element.ownerDocument;if(K==h)return!0;for(;K&&K!=w;){var le=r(K);if(K=le&&le.ownerDocument,K==h)return!0}return!1});if(!I){var q=this._monitoringUnsubscribes[d];if(this._monitoringDocuments.splice(d,1),this._monitoringUnsubscribes.splice(d,1),q(),h!=w){var se=r(h);se&&this._unmonitorIntersections(se.ownerDocument)}}}},m.prototype._unmonitorAllIntersections=function(){var h=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var d=0;d<h.length;d++)h[d]()},m.prototype._checkForIntersections=function(){if(!(!this.root&&c&&!p)){var h=this._rootIsInDom(),d=h?this._getRootRect():O();this._observationTargets.forEach(function(w){var I=w.element,q=v(I),se=this._rootContainsTarget(I),ne=w.entry,K=h&&se&&this._computeTargetAndRootIntersection(I,q,d),le=null;this._rootContainsTarget(I)?(!c||this.root)&&(le=d):le=O();var _e=w.entry=new g({time:C(),target:I,boundingClientRect:q,rootBounds:le,intersectionRect:K});ne?h&&se?this._hasCrossedThreshold(ne,_e)&&this._queuedEntries.push(_e):ne&&ne.isIntersecting&&this._queuedEntries.push(_e):this._queuedEntries.push(_e)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},m.prototype._computeTargetAndRootIntersection=function(h,d,w){if(window.getComputedStyle(h).display!="none"){for(var I=d,q=Q(h),se=!1;!se&&q;){var ne=null,K=q.nodeType==1?window.getComputedStyle(q):{};if(K.display=="none")return null;if(q==this.root||q.nodeType==9)if(se=!0,q==this.root||q==o)c&&!this.root?!p||p.width==0&&p.height==0?(q=null,ne=null,I=null):ne=p:ne=w;else{var le=Q(q),_e=le&&v(le),be=le&&this._computeTargetAndRootIntersection(le,_e,w);_e&&be?(q=le,ne=_(_e,be)):(q=null,I=null)}else{var Re=q.ownerDocument;q!=Re.body&&q!=Re.documentElement&&K.overflow!="visible"&&(ne=v(q))}if(ne&&(I=M(ne,I)),!I)break;q=q&&Q(q)}return I}},m.prototype._getRootRect=function(){var h;if(this.root&&!te(this.root))h=v(this.root);else{var d=te(this.root)?this.root:o,w=d.documentElement,I=d.body;h={top:0,left:0,right:w.clientWidth||I.clientWidth,width:w.clientWidth||I.clientWidth,bottom:w.clientHeight||I.clientHeight,height:w.clientHeight||I.clientHeight}}return this._expandRectByRootMargin(h)},m.prototype._expandRectByRootMargin=function(h){var d=this._rootMarginValues.map(function(I,q){return I.unit=="px"?I.value:I.value*(q%2?h.width:h.height)/100}),w={top:h.top-d[0],right:h.right+d[1],bottom:h.bottom+d[2],left:h.left-d[3]};return w.width=w.right-w.left,w.height=w.bottom-w.top,w},m.prototype._hasCrossedThreshold=function(h,d){var w=h&&h.isIntersecting?h.intersectionRatio||0:-1,I=d.isIntersecting?d.intersectionRatio||0:-1;if(w!==I)for(var q=0;q<this.thresholds.length;q++){var se=this.thresholds[q];if(se==w||se==I||se<w!=se<I)return!0}},m.prototype._rootIsInDom=function(){return!this.root||x(o,this.root)},m.prototype._rootContainsTarget=function(h){var d=this.root&&(this.root.ownerDocument||this.root)||o;return x(d,h)&&(!this.root||d==h.ownerDocument)},m.prototype._registerInstance=function(){s.indexOf(this)<0&&s.push(this)},m.prototype._unregisterInstance=function(){var h=s.indexOf(this);h!=-1&&s.splice(h,1)};function C(){return window.performance&&performance.now&&performance.now()}function L(h,d){var w=null;return function(){w||(w=setTimeout(function(){h(),w=null},d))}}function A(h,d,w,I){typeof h.addEventListener=="function"?h.addEventListener(d,w,I||!1):typeof h.attachEvent=="function"&&h.attachEvent("on"+d,w)}function P(h,d,w,I){typeof h.removeEventListener=="function"?h.removeEventListener(d,w,I||!1):typeof h.detachEvent=="function"&&h.detachEvent("on"+d,w)}function M(h,d){var w=Math.max(h.top,d.top),I=Math.min(h.bottom,d.bottom),q=Math.max(h.left,d.left),se=Math.min(h.right,d.right),ne=se-q,K=I-w;return ne>=0&&K>=0&&{top:w,bottom:I,left:q,right:se,width:ne,height:K}||null}function v(h){var d;try{d=h.getBoundingClientRect()}catch{}return d?(d.width&&d.height||(d={top:d.top,right:d.right,bottom:d.bottom,left:d.left,width:d.right-d.left,height:d.bottom-d.top}),d):O()}function O(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function E(h){return!h||"x"in h?h:{top:h.top,y:h.top,bottom:h.bottom,left:h.left,x:h.left,right:h.right,width:h.width,height:h.height}}function _(h,d){var w=d.top-h.top,I=d.left-h.left;return{top:w,left:I,height:d.height,width:d.width,bottom:w+d.height,right:I+d.width}}function x(h,d){for(var w=d;w;){if(w==h)return!0;w=Q(w)}return!1}function Q(h){var d=h.parentNode;return h.nodeType==9&&h!=o?r(h):(d&&d.assignedSlot&&(d=d.assignedSlot.parentNode),d&&d.nodeType==11&&d.host?d.host:d)}function te(h){return h&&h.nodeType===9}window.IntersectionObserver=m,window.IntersectionObserverEntry=g})(),window.ResizeObserver=Yn;const Jt=(()=>{try{return window||{}}catch{return{}}})();function Jn(r){return r?r.trim().split(/[\r\n]+/).reduce((s,c)=>{const p=c.indexOf(":"),g=c.slice(0,p).trim(),m=c.slice(p+1).trim();return s[g]=m,s},{}):{}}function Kn(r,o,s){o in r||(r[o]=s)}Kn(Jt,"fetch",(r,o)=>new Promise((s,c)=>{if(!Jt.XMLHttpRequest)return c({name:"NotSupportedError",message:"Not support XMLHttpRequest."});const p=new XMLHttpRequest;p.onerror=c,p.onreadystatechange=()=>{p.readyState===4&&s({ok:p.status>=200&&p.status<=299,url:p.responseURL||r,type:(o==null?void 0:o.mode)||"basic",status:p.status,headers:Jn(p.getAllResponseHeaders()),statusText:p.statusText,redirected:p.responseURL&&p.responseURL!==r,json:()=>JSON.parse(p.responseText)})},p.open((o==null?void 0:o.method)||"GET",r,!0),p.withCredentials=!!(o!=null&&o.credentials)&&(o==null?void 0:o.credentials)!=="omit";const g=(o==null?void 0:o.headers)||{};Object.keys(g).forEach(m=>{p.setRequestHeader(m,g[m])}),p.send(o==null?void 0:o.body)}));function xt(r){return re(this,void 0,void 0,function*(){const{url:o,method:s,data:c,headers:p}=r;try{return(yield fetch(o,{method:s,credentials:"same-origin",headers:Object.assign({"Content-Type":"application/json;charset=utf-8"},p),body:JSON.stringify(c)})).json()}catch(g){throw g}})}const pt={localhost:"dev","tt-m-asia.levelinfinite-club.com":"dev","tt-sg-community.playerinfinite.com":"dev","t-m-asia.levelinfinite-club.com":"test","t-sg-community.playerinfinite.com":"test"}[location.hostname]||"prod";var Kt={exports:{}};(function(r,o){(function(s,c){r.exports=c()})(Oe,function(){var s,c;function p(e){this.name="__st"+(1e9*Math.random()>>>0)+s+"__",e!=null&&e.forEach(this.add,this),s+=1}Array.prototype.find||Object.defineProperty(Array.prototype,"find",{configurable:!0,writable:!0,value:function(e){if(this===null)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if(typeof e!="function")throw new TypeError("predicate must be a function");for(var i=arguments[1],a=0;a<n;){var u=t[a];if(e.call(i,u,a,t))return u;a+=1}}}),String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(e,t){return this.substring(t=!t||t<0?0:+t,t+e.length)===e}}),window.WeakSet||(s=Date.now()%1e9,p.prototype.add=function(e){var t=this.name;return e[t]||Object.defineProperty(e,t,{value:!0,writable:!0}),this},p.prototype.delete=function(e){return!!e[this.name]&&!(e[this.name]=void 0)},p.prototype.has=function(e){return!!e[this.name]},c=p,Object.defineProperty(window,"WeakSet",{value:function(e){return new c(e)}})),Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(e==null)throw new TypeError("Cannot convert first argument to object");for(var t=Object(e),n=1;n<arguments.length;n++)if((i=arguments[n])!=null)for(var i=Object(i),a=Object.keys(Object(i)),u=0,f=a.length;u<f;u++){var y=a[u],b=Object.getOwnPropertyDescriptor(i,y);b!=null&&b.enumerable&&(t[y]=i[y])}return t}});var g=function(e,t){return(g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])})(e,t)},m=function(){return(m=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function C(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var i=Array(e),a=0,t=0;t<n;t++)for(var u=arguments[t],f=0,y=u.length;f<y;f++,a++)i[a]=u[f];return i}function L(e){try{return encodeURIComponent(decodeURIComponent(e))}catch{return e}}var A,P=["ext1","ext2","ext3","level","trace","tag","seq","code"],M=(O.prototype.indexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n].callback===t)return n;return-1},O.prototype.on=function(e,t,n){var i;if(n===void 0&&(n=0),this)return(i=this.eventsList[e])||(this.eventsList[e]=[],i=this.eventsList[e]),this.indexOf(i,t)===-1&&i.push({name:e,type:n||0,callback:t}),this},O.prototype.one=function(e,t){this.on(e,t,1)},O.prototype.remove=function(e,t){if(this){var n=this.eventsList[e];if(n){if(t)return n.length&&(t=this.indexOf(n,t),n.splice(t,1)),this;try{delete this.eventsList[e]}catch{}}return null}},O.prototype.clear=function(){this.eventsList={}},O),v=function(e){if(!e||e.length===0)return"{}";e=Array.isArray(e)?e:[e];var t=Object.keys(e[0]),n={};return t.forEach(function(i){n[i]=e.map(function(a){return a[i]})}),n.count=e.length,le(n)};function O(){var e=this;this.emit=function(t,n){if(e){var i;if((a=e.eventsList[t])!=null&&a.length)for(var a=a.slice(),u=0;u<a.length;u++){i=a[u];try{var f=i.callback.apply(e,[n]);if(i.type===1&&e.remove(t,i.callback),f===!1)break}catch(y){throw y}}return e}},this.eventsList={}}(H=A=A||{})[H.number=-1]="number",H.string="";function E(e,t){return typeof e=="number"||typeof e=="string"?e:t?A.string:A.number}function _(e,t){return typeof e=="string"?e.split("?")[t?1:0]||"":e}function x(e){return typeof e=="string"&&e.startsWith("//")?typeof location!="undefined"&&location.protocol==="https:":/^https/.test(e)}function Q(e){return q.some(function(t){return e.indexOf(t)!==-1})}function te(e,t,n){var i,a;try{if(typeof(t==null?void 0:t.retCodeHandler)=="function")return{code:(u=(a=t.retCodeHandler(e,n==null?void 0:n.url,n==null?void 0:n.ctx)||{}).code)===void 0?"unknown":u,isErr:a.isErr};typeof e=="string"&&(e=JSON.parse(e)),typeof((i=t==null?void 0:t.ret)==null?void 0:i.join)=="function"&&(se=[].concat(t.ret.map(function(y){return y.toLowerCase()})));var u,f=Object.getOwnPropertyNames(e).filter(function(y){return se.indexOf(y.toLowerCase())!==-1});return f.length?{code:""+(u=Number(e[f[0]])),isErr:u!==0}:{code:"unknown",isErr:!1}}catch{return{code:"unknown",isErr:!1}}}function h(e,t){t===void 0&&(t=3);var n,i,a,u="";return Array.isArray(e)?(u+="[",n=e.length,e.forEach(function(f,y){var b,R;u=(u+=typeof f=="object"&&1<t?h(f,t-1):(R="",R+=(b=typeof(f=f))=="undefined"||b=="symbol"||b=="function"?"null":b=="string"||b=="object"?'"'+f+'"':f))+(y===n-1?"":",")}),u+="]"):e instanceof Object?(u="{",i=Object.keys(e),a=i.length,i.forEach(function(f,y){var b,R,l;typeof e[f]=="object"&&1<t?u+='"'+f+'":'+h(e[f],t-1):u+=(b=e[f=f],l="",(R=typeof b)=="string"||R=="object"?l+='"'+f+'":"'+b+'"':typeof b=="function"?l+='"'+f+'":"function '+b.name+'"':typeof b=="symbol"?l+='"'+f+'":"symbol"':typeof b!="number"&&R!="boolean"||(l+='"'+f+'": '+b),l),u+=y===a-1||y<a-1&&e[i[y+1]]===void 0?"":","}),u+="}"):u+=e,u}var d,w,I,q=["application/octet-stream","application/xhtml+xml","application/xml","application/pdf","application/pkcs12","application/javascript","application/ecmascript","application/vnd.mspowerpoint","application/vnd.apple.mpegurl","application/ogg","text/css","text/javascript","image","audio","video"],se=["ret","retcode","code","errcode"],ne=function(){var e=new WeakSet;return function(t,n){if(n instanceof Error)return"Error.message: "+n.message+` 
  Error.stack: `+n.stack;if(typeof n=="object"&&n!==null){if(e.has(n))return"[Circular "+(t||"root")+"]";e.add(n)}return n}},K=function(e){if(typeof e=="string")return e;try{return e instanceof Error?(JSON.stringify(e,ne(),4)||"undefined").replace(/"/gim,""):JSON.stringify(e,ne(),4)||"undefined"}catch(t){return`error happen when aegis stringify: 
 `+t.message+` 
 `+t.stack}},le=function(e){if(typeof e=="string")return e;try{return JSON.stringify(e,ne())||"undefined"}catch(t){return`error happen when aegis stringify: 
 `+t.message+` 
 `+t.stack}},_e=(be.prototype.sourceURL=function(){return this.data.url},be.prototype.status=function(){return Number(this.data.status)},be.prototype.headers=function(){var e={};return this.data.headers.forEach(function(t,n){e[n]=t}),e},be);function be(e,t){this.type="fetch",this.data=e||{},this.data.response=t}(H=d=d||{}).INFO_ALL="-1",H.API_RESPONSE="1",H.INFO="2",H.ERROR="4",H.PROMISE_ERROR="8",H.AJAX_ERROR="16",H.SCRIPT_ERROR="32",H.IMAGE_ERROR="64",H.CSS_ERROR="128",H.CONSOLE_ERROR="256",H.MEDIA_ERROR="512",H.RET_ERROR="1024",H.REPORT="2048",H.PV="4096",H.EVENT="8192",H.PAGE_NOT_FOUND_ERROR="16384",H.WEBSOCKET_ERROR="32768",(H=w=w||{}).LOG="log",H.SPEED="speed",H.PERFORMANCE="performance",H.OFFLINE="offline",H.WHITE_LIST="whiteList",H.VITALS="vitals",H.PV="pv",H.CUSTOM_PV="customPV",H.EVENT="event",H.CUSTOM="custom",H.SDK_ERROR="sdkError",H.SET_DATA="setData",H.LOAD_PACKAGE="loadPackage",(H=I=I||{}).production="production",H.development="development",H.gray="gray",H.pre="pre",H.daily="daily",H.local="local",H.test="test",H.others="others";function Re(e,t){var n,i=[],a=e.config;return e.lifeCycle.on("destroy",function(){i.length=0}),function(u,f){if(Array.isArray(u)?i=i.concat(u):i.push(u),t&&i.length>=t||e.sendNow&&0<i.length)return i=et(i),f(i.splice(0,i.length)),void(n&&clearTimeout(n));n&&clearTimeout(n),n=setTimeout(function(){n=null,0<(i=et(i)).length&&f(i.splice(0,i.length))},a.delay)}}function At(e,t){return Array.isArray(e)?t(e.map(function(n){return i=m(m({},n),{msg:typeof n.msg=="string"?n.msg:[].concat(n.msg).map(K).join(" ")}),P.forEach(function(a){i[a]||delete i[a]}),i;var i})):t([m(m({},e),{msg:typeof e.msg=="string"?e.msg:K(e.msg)})])}function He(e){return function(t,n){e.lifeCycle.emit("modifyRequest",t);var i=e.config.modifyRequest;if(typeof i=="function")try{var a=i(t);typeof a=="object"&&"url"in a&&(t=a)}catch(u){console.error(u)}n(t)}}function Fe(e){return function(t,n){e.lifeCycle.emit("afterRequest",t);var i=e.config.afterRequest;typeof i=="function"&&i(t)===!1||n(t)}}function Ie(e){if(e&&e.reduce&&e.length)return e.length===1?function(t,n){e[0](t,n||Ue)}:e.reduce(function(t,n){return function(i,a){return a===void 0&&(a=Ue),t(i,function(u){return n==null?void 0:n(u,a)})}});throw new TypeError("createPipeline need at least one function param")}function Be(e,t){Object.getOwnPropertyNames(e).forEach(function(n){typeof e[n]=="function"&&n!=="constructor"&&(t?t[n]=n==="sendPipeline"?function(){return function(){}}:function(){}:e[n]=function(){})})}function Pe(){return window.performance!==void 0&&typeof performance.clearResourceTimings=="function"&&typeof performance.getEntriesByType=="function"&&typeof performance.now=="function"}function Ze(e,t){function n(i){i.type!=="pagehide"&&document.visibilityState!=="hidden"||(e(i),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))}addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)}function We(e){return gt.some(function(t){return-1<e.indexOf(t)})}function Xe(e){var t,n,i;W.find(function(a){return a.name===e.name})||(W.push(e),Ge||!window.XMLHttpRequest)||(Ge=!0,t=window.XMLHttpRequest.prototype.send,n=window.XMLHttpRequest.prototype.open,i=window.XMLHttpRequest.prototype.setRequestHeader,window.XMLHttpRequest.prototype.open=function(){if(this.aegisMethod=arguments[0],this.aegisUrl=arguments[1],this.aegisXhrStartTime=Date.now(),!this.sendByAegis)for(var a=0;a<W.length;a++){var u=W[a];try{typeof u.open=="function"&&u.open(this)}catch{}}return n.apply(this,arguments)},window.XMLHttpRequest.prototype.setRequestHeader=function(){var a=arguments[0],u=arguments[1];return this.aegisXhrReqHeader=this.aegisXhrReqHeader||{},this.aegisXhrReqHeader[a]=u,i.apply(this,arguments)},window.XMLHttpRequest.prototype.send=function(){if(!this.sendByAegis)for(var a=0;a<W.length;a++){var u=W[a];try{typeof u.send=="function"&&u.send(this,arguments[0])}catch{}}return t.apply(this,arguments)})}function Ye(e){var t=W.findIndex(function(n){return n.name===e.name});t!==-1&&W.splice(t,1)}function Qe(e){return e.split(`\r
`).reduce(function(t,n){return n=n.split(": "),n[0]&&n[1]&&(t[n[0]]=n[1]),t},{})}function Te(e,t,n){return t!=null&&t.length&&typeof e=="object"?t.reduce(function(i,a){var u=e instanceof Headers?e.get(a):e[a];return u?i+(i===""?`
`:`

`)+n+" header "+a+": "+u:i},""):""}function Ve(e){var t,n="";return typeof e=="object"&&(t=(e=function(i){for(var a=0,u=Object.keys(ce);a<u.length;a++){var f=u[a],y=i[f]||typeof i.get=="function"&&i.get(f);if(y)return[f,y]}return["",""]}(e))[0],e=e[1],t&&(n=ce[t](e))),n}var we,ke,et=function(e){return e.filter(function(t,n){return t.type!=="static"||!e.find(function(i,a){return t.url===i.url&&t.status===200&&n<a})})},Ne=function(e){e.level===d.INFO_ALL&&(e.level=d.INFO)},It=function(e){return(Array.isArray(e)?e:[e]).map(function(t){return Object.getOwnPropertyNames(t).reduce(function(n,i){return i!=="ctx"&&(n[i]=t[i]),n},{level:d.INFO,msg:""})})},Je=function(e){return function(t){return e.sendPipeline([function(n,i){return i({url:e.config.url||"",data:v(It(n)),method:"post",contentType:"application/json",type:w.LOG,log:n,requestConfig:{timeout:5e3},success:function(){var a=e.config.onReport;typeof a=="function"&&n.forEach(function(u){a(u)}),typeof i=="function"&&i([])},fail:function(a){a==="403 forbidden"&&e.destroy()}})}],w.LOG)(t)}},Ue=function(){},H=(Object.defineProperty(k.prototype,"__version__",{get:function(){return console.warn("__version__ has discard, please use version"),"1.36.2"},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"LogType",{get:function(){return console.warn("LogType has discard, please use logType"),d},enumerable:!1,configurable:!0}),k.prototype.init=function(e){this.setConfig(e);for(var t=0;t<k.installedPlugins.length;t++)try{k.installedPlugins[t].patch(this)}catch(n){this.sendSDKError(n)}this.lifeCycle.emit("onInited")},k.prototype.setConfig=function(l){Object.assign(this.config,l);var l=this.config,t=l.id,n=l.uin,i=l.version,a=l.ext1,u=l.ext2,f=l.ext3,y=l.aid,R=l.env,b=R===void 0?"production":R,R=l.pageUrl,l=this.bean.id!==t||this.bean.uin!==n||this.bean.aid!==y;return this.bean.id=t||"",this.bean.uin=n||"",this.bean.version=i||"1.36.2",this.bean.aid=y||"",this.bean.env=function(){switch(b){case I.production:case I.development:case I.gray:case I.pre:case I.daily:case I.local:case I.test:case I.others:return 1;default:return}}()?b:I.others,R&&this.extendBean("from",encodeURIComponent(R)),a&&this.extendBean("ext1",encodeURIComponent(a)),u&&this.extendBean("ext2",encodeURIComponent(u)),f&&this.extendBean("ext3",encodeURIComponent(f)),l&&this.lifeCycle.emit("onConfigChange",this.config),this.config},k.use=function(e){k.installedPlugins.indexOf(e)===-1&&e.aegisPlugin&&k.installedPlugins.push(e)},k.unuse=function(e){e=k.installedPlugins.indexOf(e),e!==-1&&k.installedPlugins.splice(e,1)},k.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:d.INFO,msg:e};e.length===1&&e[0].msg&&Object.assign(n,m({},e[0]),{level:d.INFO}),this.normalLogPipeline(n)},k.prototype.infoAll=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:d.INFO_ALL,msg:e};e.length===1&&e[0].msg&&Object.assign(n,m({},e[0]),{level:d.INFO_ALL}),this.normalLogPipeline(n)},k.prototype.report=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:d.REPORT,msg:e};e.length===1&&e[0].msg&&Object.assign(n,m({},e[0])),this.normalLogPipeline(n)},k.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={level:d.ERROR,msg:e};e.length===1&&e[0].msg&&Object.assign(n,m({},e[0]),{level:d.ERROR}),this.normalLogPipeline(n)},k.prototype.speedLogPipeline=function(e){throw new Error('You need to override "speedLogPipeline" method')},k.prototype.reportPv=function(e){var t,n=this;e&&(console.warn("reportPv is deprecated, please use reportEvent"),t=""+Object.getOwnPropertyNames(this.bean).filter(function(i){return i!=="id"}).map(function(i){return i+"="+n.bean[i]}).join("&"),this.sendPipeline([function(i,a){a({url:n.config.url+"/"+e+"?"+t,addBean:!1,type:w.CUSTOM_PV,fail:function(u){u==="403 forbidden"&&n.destroy()}})}],w.CUSTOM_PV)(null))},k.prototype.reportEvent=function(e){e&&((e=typeof e=="string"?{name:e,ext1:this.config.ext1||"",ext2:this.config.ext2||"",ext3:this.config.ext3||""}:e).name?this.eventPipeline(e):console.warn("reportEvent params error"))},k.prototype.reportTime=function(e,t){if(typeof e=="object")return this.reportT(e);typeof e=="string"?typeof t=="number"?t<0||6e4<t?console.warn("reportTime: duration must between 0 and 60000"):this.submitCustomTime(e,t):console.warn("reportTime: second param must be number"):console.warn("reportTime: first param must be a string")},k.prototype.reportT=function(f){var t=f.name,n=f.duration,i=f.ext1,i=i===void 0?"":i,a=f.ext2,a=a===void 0?"":a,u=f.ext3,u=u===void 0?"":u,f=f.from;if(typeof t=="string"&&typeof n=="number"&&typeof i=="string"&&typeof a=="string"&&typeof u=="string"){if(!(n<0||6e4<n))return this.submitCustomTime(t,n,i,a,u,f===void 0?"":f);console.warn("reportTime: duration must between 0 and 60000")}else console.warn("reportTime: params error")},k.prototype.time=function(e){typeof e=="string"?this.timeMap[e]?console.warn("Timer "+e+" already exists"):this.timeMap[e]=Date.now():console.warn("time: first param must be a string")},k.prototype.timeEnd=function(e){typeof e=="string"?this.timeMap[e]?(this.submitCustomTime(e,Date.now()-this.timeMap[e]),delete this.timeMap[e]):console.warn("Timer "+e+" does not exist"):console.warn("timeEnd: first param must be a string")},k.prototype.submitCustomTime=function(e,t,n,i,a,u){this.customTimePipeline({name:e,duration:t,ext1:n||this.config.ext1,ext2:i||this.config.ext2,ext3:a||this.config.ext3,from:u||void 0})},k.prototype.extendBean=function(e,t){this.bean[e]=t},k.prototype.sendPipeline=function(e,t){var n,i,a,u=this;return Ie(C([function(f,y){if(typeof n.config.random!="number"&&(console.warn("random must in [0, 1], default is 1."),n.config.random=1),!n.isHidden||!n.isGetSample)if(n.isGetSample)n.isHidden||y(f);else{if(n.isGetSample=!0,Math.random()<n.config.random)return n.isHidden=!1,y(f);n.isHidden=!0}},(a=t,function(f,y){var b=Array.isArray(f),R=b?f:[f],l=(i.lifeCycle.emit("beforeRequest",f),i.config.beforeRequest);(R=typeof l=="function"?R.map(function(S){try{var T=l({logs:S,logType:a});return(T==null?void 0:T.logType)===a&&T!=null&&T.logs?T.logs:T!==!1&&S}catch{return S}}).filter(function(S){return S!==!1}):R).length&&(R=function(S,T){if(!Array.isArray(S)||S.length<=1)return S;var j=[],V=[];return!(V=typeof T=="string"?[T]:T)||V.length<=0||(V.forEach(function(F){S.forEach(function(J){J!=null&&J[F]&&j.push(F)})}),0<j.length&&(S=S.map(function(F){var J={};return j.forEach(function(N){J[N]=""}),m(m({},J),F)}))),S}(R,P),y(b?R:R[0]))})],e,[He(i=n=this),function(f,y){u.request(f,function(){for(var b,R=[],l=0;l<arguments.length;l++)R[l]=arguments[l];u.failRequestCount=0,y({isErr:!1,result:R,logType:f==null?void 0:f.type,logs:f==null?void 0:f.log}),(b=f==null?void 0:f.success)!=null&&b.call.apply(b,C([f],R))},function(){for(var b,R=[],l=0;l<arguments.length;l++)R[l]=arguments[l];10<=++u.failRequestCount&&u.destroy(),y({isErr:!0,result:R,logType:f==null?void 0:f.type,logs:f==null?void 0:f.log}),(b=f==null?void 0:f.fail)!=null&&b.call.apply(b,C([f],R))})},Fe(this)]))},k.prototype.send=function(e,t,n){var i=this;return Ie([He(this),function(a,u){i.request(a,function(){for(var f=[],y=0;y<arguments.length;y++)f[y]=arguments[y];u({isErr:!1,result:f,logType:a.type,logs:a.log}),t!=null&&t.apply(void 0,f)},function(){for(var f=[],y=0;y<arguments.length;y++)f[y]=arguments[y];u({isErr:!0,result:f,logType:a.type,logs:a.log}),n!=null&&n.apply(void 0,f)})},Fe(this)])(e)},k.prototype.request=function(e,t,n){throw new Error('You need to override "request" method')},k.prototype.sendSDKError=function(e){var t=this;this.sendPipeline([function(n,i){i({url:t.config.url+"?id=1085&msg[0]="+encodeURIComponent(K(n))+"&level[0]=2&from="+t.config.id+"&count=1&version="+t.config.id+"(1.36.2)",addBean:!1,method:"get",type:w.SDK_ERROR,log:n})}],w.SDK_ERROR)(e)},k.prototype.destroy=function(e){e===void 0&&(e=!1);var t,n,i=k.instances.indexOf(this);i!==-1&&k.instances.splice(i,1);for(var a=k.installedPlugins.length-1;0<=a;a--)try{k.installedPlugins[a].unpatch(this)}catch(f){this.sendSDKError(f)}if(this.lifeCycle.emit("destroy"),this.lifeCycle.clear(),e)t=this,n=Object.getOwnPropertyDescriptors(t),Object.keys(n).forEach(function(f){n[f].writable&&(t[f]=null)}),Object.setPrototypeOf(this,null);else{for(var u=this;u.constructor!==Object&&Be(u,this),u=Object.getPrototypeOf(u););k.instances.length===0&&(i=Object.getPrototypeOf(this).constructor,Be(i),Be(k))}},k.version="1.36.2",k.instances=[],k.logType=d,k.environment=I,k.installedPlugins=[],k),ae=(pe.prototype.patch=function(e){this.canUse(e)&&this.exist(e)&&(this.instances.push(e),this.triggerInit(e),this.triggerOnNewAegis(e))},pe.prototype.unpatch=function(e){e=this.instances.indexOf(e),e!==-1&&(this.instances.splice(e,1),this.instances.length===0&&this.uninstall())},pe.prototype.countInstance=function(){return this.instances.length},pe.prototype.uninstall=function(){var e;(e=(e=this.option)==null?void 0:e.destroy)!=null&&e.apply(this)},pe.prototype.walk=function(e){var t=this;this.instances.forEach(function(n){var i=t.canUse(n);i&&e(n,i)})},pe.prototype.canUse=function(e){return e=this.getConfig(e),!(!e||typeof e!="object")||!!e},pe.prototype.getConfig=function(e){return(e=e.config)==null?void 0:e[this.name]},pe.prototype.exist=function(e){return this.instances.indexOf(e)===-1},pe.prototype.triggerInit=function(e){var t;this.inited||(this.inited=!0,(t=(t=this.option)==null?void 0:t.init)!=null&&t.call(this.option,this.getConfig(e)))},pe.prototype.triggerOnNewAegis=function(e){var t;(t=(t=this.option)==null?void 0:t.onNewAegis)!=null&&t.call(this.option,e,this.getConfig(e))},pe),kt=new ae({name:"aid",aid:"",init:function(e){try{var t=e!==!0&&e||window.localStorage.getItem("AEGIS_ID");t||(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var i=16*Math.random()|0;return(n==="x"?i:3&i|8).toString(16)}),window.localStorage.setItem("AEGIS_ID",t)),this.aid=t}catch{}},onNewAegis:function(e){e.bean.aid=this.aid,e.config.aid=this.aid}}),gt=["/collect/offlineAuto","/aegis-sdk","/flog.core.min.js"],tt=function(e){var t;return e.payload?(t={},Object.keys(e).forEach(function(n){n!=="payload"&&(t[n]=e[n])}),t):e},he=new ae({name:"reportAssetSpeed"}),Me=he=new ae({name:"reportAssetSpeed",collectCur:0,collectEntryType:"resource",ASSETS_INITIATOR_TYPE:["img","css","script","link","audio","video"],onNewAegis:function(e){var t=this;Pe()&&(this.collectSuccessLog(e),this.collectFailLog(e),performance.onresourcetimingbufferfull=function(){t.collectCur=0,performance.clearResourceTimings()})},publish:function(e){this.$walk(function(t){t.speedLogPipeline(e)})},publishMany:function(e,t){for(var n=t.config,i=0,a=e.length;i<a;i++){var u=e[i];this.ASSETS_INITIATOR_TYPE.indexOf(u.initiatorType)===-1||We(u.name)||this.publish(this.generateLog(u,n))}},collectSuccessLog:function(e){var t,n,i=this;typeof window.PerformanceObserver=="function"?(this.publishMany(performance.getEntriesByType(this.collectEntryType),e),(t=new window.PerformanceObserver(function(a){i.publishMany(a.getEntries(),e)})).observe({entryTypes:[this.collectEntryType]}),e.lifeCycle.on("destroy",function(){he.countInstance()===0&&t.disconnect()})):(n=setInterval(function(){var a=performance.getEntriesByType(i.collectEntryType),u=a.slice(i.collectCur);i.collectCur=a.length,i.publishMany(u,e)},3e3),e.lifeCycle.on("destroy",function(){he.countInstance()===0&&clearInterval(n)}))},collectFailLog:function(e){function t(a){var u,f;a&&(a=a.target||a.srcElement,!(u=(a==null?void 0:a.src)||(a==null?void 0:a.href))||typeof u!="string"||-1<window.location.href.indexOf(u)||(a=typeof((a=i.api)==null?void 0:a.resourceTypeHandler)=="function"?(a=i.api)==null?void 0:a.resourceTypeHandler(u):"",f=performance.getEntriesByType(n.collectEntryType).find(function(y){return y.name===u}),We(u)||(f={url:_(u),status:400,duration:Number(((f==null?void 0:f.duration)||0).toFixed(2)),method:"get",type:a||"static",isHttps:x(u),urlQuery:_(u,!0),nextHopProtocol:"",domainLookup:0,connectTime:0},n.publish(f))))}var n=this,i=e.config;window.document.addEventListener("error",t,!0),e.lifeCycle.on("destroy",function(){he.countInstance()===0&&window.document.removeEventListener("error",t,!0)})},generateLog:function(e,i){var n,i=typeof((n=i.api)==null?void 0:n.resourceTypeHandler)=="function"?(n=i.api)==null?void 0:n.resourceTypeHandler(e.name):"";return{url:_(e.name),method:"get",duration:Number(e.duration.toFixed(2)),status:200,type:i||"static",isHttps:x(e.name),nextHopProtocol:e.nextHopProtocol||"",urlQuery:_(e.name,!0),domainLookup:E(e.domainLookupEnd-e.domainLookupStart),connectTime:E(e.connectEnd-e.connectStart)}},collectNotReportedLog:function(e){var t,n;Pe()&&(t=(n=performance.getEntriesByType(this.collectEntryType)).length,typeof window.PerformanceObserver!="function"&&this.collectCur!==t&&(n=n.slice(this.collectCur),this.collectCur=t,this.publishMany(n,e,!0)))},destroy:function(){this.option.publish=function(){}}}),Ge=!1,W=[],Z=!1,B=[],ce={sw8:function(e){return e=e.split("-")[1],e?atob(e):""},traceparent:function(e){return e.split("-")[1]},"sentry-trace":function(e){return e.split("-")[0]}},X=(new ae({name:"reportApiSpeed"}),new ae({name:"reportApiSpeed",override:!1,onNewAegis:function(e){this.override||(this.override=!0,this.overrideFetch(e.config),this.overrideXhr(e.config))},overrideFetch:function(e){var t,n=this,i={name:this.name,then:function(u,f,y,b){var R,l,S;e.hostUrl&&-1<y.indexOf(e.hostUrl)||(R={url:u.url,isHttps:x(u.url),method:(b==null?void 0:b.method)||"get",duration:f,type:"fetch",nextHopProtocol:"",status:u.status||0},(S=typeof((l=e.api)==null?void 0:l.resourceTypeHandler)=="function"?(l=e.api)==null?void 0:l.resourceTypeHandler(u.url):S)!=="fetch"&&S!=="static"&&(l=u.headers?u.headers.get("content-type"):"",S=u.ok&&typeof l=="string"&&Q(l)?"static":"fetch"),S==="fetch"?u.clone().text().then(function(T){var Y=(Y=e.api)==null?void 0:Y.apiDetail,j=u.status<=0||400<=u.status,V=((V=e.api)==null?void 0:V.reqHeaders)||[],V=Te(b==null?void 0:b.headers,V,"req"),F=((F=e.api)==null?void 0:F.resHeaders)||[],F=Te(u.headers,F,"res"),J=Ve(b==null?void 0:b.headers),G=te(T,e.api,{url:y,ctx:u}),N=G.code,G=G.isErr,Y=(j?"FETCH_ERROR: "+T+` 

`:"")+"fetch req url: "+y+` 
                                
req method: `+((b==null?void 0:b.method)||"get")+` 
                                
req param: `+(Y?h(b==null?void 0:b.body):"")+` 
                                
res duration: `+f+`ms 
                                
res status: `+(u.status||0)+` 
                                
res retcode: `+N+`
                                
res data: `+(Y?T:"")+`
                                `+V+`
                                `+F;R.payload=new _e(u,T),R.ret=N,R.isErr=+G,n.publishNormalLog({msg:Y,level:j?d.AJAX_ERROR:G?d.RET_ERROR:d.API_RESPONSE,code:N,trace:J})}):Object.assign(R,{type:"static",urlQuery:_(u.url,!0),domainLookup:A.number,connectTime:A.number}),n.publishSpeed(R))},catch:function(u,f,y,b){var R,l,S;if(!(e.hostUrl&&-1<y.indexOf(e.hostUrl)))throw R={url:y,isHttps:x(y),method:(b==null?void 0:b.method)||"get",duration:f,nextHopProtocol:"",type:"fetch",status:0},n.publishSpeed(R),R=(R=e.api)==null?void 0:R.apiDetail,l=((l=e.api)==null?void 0:l.reqHeaders)||[],l=Te(b==null?void 0:b.headers,l,"req"),S=Ve(b==null?void 0:b.headers),f="AJAX_ERROR: "+u+`
                          
res status: 0
                          
res duration: `+f+`ms
                          
req url: `+y+`
                          
req method: `+((b==null?void 0:b.method)||"get")+`
                          
req param: `+(R?h(b==null?void 0:b.body):"")+`
                          `+l,n.publishNormalLog({msg:f,level:d.AJAX_ERROR,code:-400,trace:S}),u}},a=(this.hackFetchOptions=i,this.hackFetchOptions);if(B.find(function(u){return u.name===a.name}))throw new Error("name '"+a.name+"' is already in hackFetch option list");B.push(a),!Z&&window.fetch&&(Z=!0,t=window.fetch,window.fetch=function(u,f){f===void 0&&(f={});for(var y=typeof u=="string"?u:u.url,b=0;b<B.length;b++){var R=B[b];try{typeof R.beforeFetch=="function"&&R.beforeFetch(y,f)}catch{}}var l=Date.now();return t(u,f).then(function(S){for(var T=0;T<B.length;T++){var j=B[T];try{typeof j.then=="function"&&j.then(S,Date.now()-l,y,f)}catch{}}return S}).catch(function(S){for(var T=0;T<B.length;T++){var j=B[T];try{typeof j.catch=="function"&&j.catch(S,Date.now()-l,y,f)}catch{}}throw S})})},getRequestType:function(a,t,n){var i,a=typeof((i=a.api)==null?void 0:i.resourceTypeHandler)=="function"?(i=a.api)==null?void 0:i.resourceTypeHandler(n):"";return a!=="fetch"&&a!=="static"&&(i=t.getResponseHeader("content-type"),a=400<=t.status||typeof i!="string"||!Q(i)?"fetch":"static"),a},overrideXhr:function(e){var t=this,n={name:this.name,send:function(i,a){var u=Date.now();i.addEventListener("loadend",function(){var f,y=i.aegisUrl||"";if(y&&!(e.hostUrl&&-1<y.indexOf(e.hostUrl))){var b=Date.now()-u,R={url:y,isHttps:x(y),status:i.status||0,method:i.aegisMethod||"get",type:"fetch",nextHopProtocol:"",duration:b},l=((l=e.api)==null?void 0:l.reqHeaders)||[],l=Te(i.aegisXhrReqHeader,l,"req"),T=((T=e.api)==null?void 0:T.resHeaders)||[],S=Qe(i.getAllResponseHeaders()),S=Te(S,T,"res"),T=Ve(i.aegisXhrReqHeader);if(t.getRequestType(e,i,y)==="fetch")try{var j=(f=e.api)==null?void 0:f.apiDetail,V=te(i.response,e.api,{url:y,ctx:i}),F=V.code,J=V.isErr,N="xhr req url: "+y+`
                                
req method: `+R.method+`
                                
req param: `+(j?h(a):"")+`
                                
res duration: `+b+`ms
                                
res status: `+R.status+`
                                
res retcode: `+F+`
                                
res data: `+(j?h(i.response):"")+`
                                `+l+`
                                `+S;R.ret=F,R.isErr=+J,t.publishNormalLog({msg:N,level:J?d.RET_ERROR:d.API_RESPONSE,code:F,trace:T})}catch{R.ret="unknown"}else Object.assign(R,{type:"static",urlQuery:_(y,!0),domainLookup:A.number,connectTime:A.number});t.publishSpeed(R)}})}};this.hackXHROptions=n,Xe(this.hackXHROptions)},publishSpeed:function(e){var t=this;this.$walk(function(n){var i=t.$getConfig(n);e.type==="fetch"&&i&&typeof i.urlHandler=="function"?n.speedLogPipeline(m(m({},e),{url:_(i.urlHandler(e.url,e.payload))})):(e.url=_(e.url),n.speedLogPipeline(e))})},publishNormalLog:function(e){this.$walk(function(t){t.normalLogPipeline(e)})},destroy:function(){var e,t;this.option.publishSpeed=function(){},this.option.publishNormalLog=function(){},this.option.hackXHROptions&&Ye(this.option.hackXHROptions),this.option.hackFetchOptions&&(e=this.option.hackFetchOptions,(t=B.findIndex(function(n){return n.name===e.name}))!==-1&&B.splice(t,1))}}));function pe(e){this.aegisPlugin=!0,this.name="",this.instances=[],this.inited=!1,e.$walk=this.walk.bind(this),e.$getConfig=this.getConfig.bind(this),this.option=e,this.name=e.name}function k(e){var t,n,i,a,u,f,y,b,R,l,S,T,j,V,F,J=this;this.isGetSample=!1,this.isHidden=!1,this.config={version:0,delay:1e3,onError:!0,repeat:5,random:1,aid:!0,device:!0,pagePerformance:!0,webVitals:!0,speedSample:!0,onClose:!0,hostUrl:"https://aegis.qq.com",websocketHack:!1,env:"production",url:"",offlineUrl:"",whiteListUrl:"",pvUrl:"",speedUrl:"",customTimeUrl:"",performanceUrl:"",webVitalsUrl:"",eventUrl:"",setDataReportUrl:""},this.isWhiteList=!1,this.lifeCycle=new M,this.bean={},this.normalLogPipeline=Ie([Re(this,5),At,function(N,G){var Y=t.config;G(N=N.map(function(U){var z,ie=Y.maxLength||204800;try{if(!U.msg||U.msg.length<=ie)return U;U.msg=(z=U.msg)==null?void 0:z.substring(0,ie)}catch{U.msg=K(U.msg).substring(0,Y.maxLength)}return U}))},(V=(t=this).config,F={},function(N,G){var Y=typeof V.repeat=="number"?V.repeat:5;if(Y===0)return G(N);G(N.filter(function(U){return U.level!==d.ERROR&&U.level!==d.PROMISE_ERROR&&U.level!==d.AJAX_ERROR&&U.level!==d.SCRIPT_ERROR&&U.level!==d.IMAGE_ERROR&&U.level!==d.CSS_ERROR&&U.level!==d.MEDIA_ERROR||(F[U.msg]=F[U.msg]||0,F[U.msg]+=1,!(F[U.msg]>Y))}))}),(T=this.lifeCycle.emit,j=this.config,function(N,G){var Y,U=j.logCreated;return typeof U=="function"?(Y=N.filter(function(z){return U(z)!==!1}),T("beforeWrite",Y),G(Y)):(T("beforeWrite",N),G(N))}),(S=this,setTimeout(function(){var N=S.config.pvUrl,G=N===void 0?"":N;G&&S.sendPipeline([function(Y,U){U({url:G,type:w.PV,fail:function(z){z==="403 forbidden"&&S.destroy()}})}],w.PV)(null)},100),function(N,G){G(N)}),(R=b=y=!1,l=[],(u=this).lifeCycle.on("onConfigChange",function(){f&&clearTimeout(f),f=setTimeout(function(){var N,G;!R&&u.config&&(R=!0,N=u.config.whiteListUrl,(G=N===void 0?"":N)&&u.sendPipeline([function(Y,U){U({url:G,type:w.WHITE_LIST,success:function(z){b=!0;try{var ie=z.data||JSON.parse(z),de=ie.retcode,Le=ie.result,fe=Le===void 0?{}:Le;if(de===0){if(y=fe.is_in_white_list,u.isWhiteList=y,fe.shutdown)return void u.destroy();0<=fe.rate&&fe.rate<=1&&(u.config.random=fe.rate,u.isGetSample=!1)}u.isWhiteList&&l.length?Je(u)(l.splice(0),function(){}):!u.isWhiteList&&l.length&&(l.length=0);var ee=u.config.onWhitelist;typeof ee=="function"&&ee(y)}catch{}},fail:function(z){z==="403 forbidden"&&u.destroy(),b=!0}})}],w.WHITE_LIST)(null),R=!1)},u.config.uin?50:500)}),u.lifeCycle.on("destroy",function(){l.length=0}),function(N,G){var Y;y||(Y=(Y=u.config)==null?void 0:Y.api)!=null&&Y.reportRequest?G(N.concat(l.splice(0)).map(function(U){return Ne(U),U})):(Y=N.filter(function(U){return U.level!==d.INFO&&U.level!==d.API_RESPONSE?(Ne(U),!0):(b||(l.push(U),200<=l.length&&(l.length=200)),!1)})).length&&G(Y)}),function(N,G){try{var Y=JSON.parse(JSON.stringify(N)),U=(J.lifeCycle.emit("beforeReport",Y),J.config.beforeReport);(N=typeof U=="function"?N.filter(function(z){return U(z)!==!1}):N).length&&G(N)}catch{}},Je(this)]),this.eventPipeline=Ie([Re(this,5),(a=this,function(N){a.sendPipeline([function(G,Y){var U=G.map(function(z){return{name:z.name,ext1:z.ext1||a.config.ext1||"",ext2:z.ext2||a.config.ext2||"",ext3:z.ext3||a.config.ext3||""}});Y({url:a.config.eventUrl+"?payload="+encodeURIComponent(JSON.stringify(U)),type:w.EVENT,log:G,fail:function(z){z==="403 forbidden"&&a.destroy()}})}],w.EVENT)(N)})]),this.timeMap={},this.failRequestCount=0,this.customTimePipeline=Ie([Re(this,5),(i=this,function(N){return i.sendPipeline([function(G,Y){Y({url:i.config.customTimeUrl+"?payload="+encodeURIComponent(JSON.stringify({custom:G})),type:w.CUSTOM,log:G,fail:function(U){U==="403 forbidden"&&i.destroy()}})}],w.CUSTOM)(N)})]),this.config=(n=this.config,(e=e.hostUrl)===void 0&&(e="https://aegis.qq.com"),n.url=n.url||e+"/collect",n.offlineUrl=n.offlineUrl||e+"/offline",n.whiteListUrl=n.whiteListUrl||e+"/collect/whitelist",n.pvUrl=n.pvUrl||e+"/collect/pv",n.eventUrl=n.eventUrl||e+"/collect/events",n.speedUrl=n.speedUrl||e+"/speed",n.customTimeUrl=n.customTimeUrl||e+"/speed/custom",n.performanceUrl=n.performanceUrl||e+"/speed/performance",n.webVitalsUrl=n.webVitalsUrl||e+"/speed/webvitals",n.setDataReportUrl=n.SetDataReportUrl||e+"/speed/miniProgramData",n),k.instances.push(this)}(oe=we=we||{})[oe.unknown=100]="unknown",oe[oe.wifi=1]="wifi",oe[oe.net2g=2]="net2g",oe[oe.net3g=3]="net3g",oe[oe.net4g=4]="net4g",oe[oe.net5g=5]="net5g",oe[oe.net6g=6]="net6g",(oe=ke=ke||{})[oe.android=1]="android",oe[oe.ios=2]="ios",oe[oe.windows=3]="windows",oe[oe.macos=4]="macos",oe[oe.linux=5]="linux",oe[oe.other=100]="other";function ye(e,t,n,i){return n===void 0&&(n=15e3),i===void 0&&(i=0),(t=t===void 0?0:t)<=e&&e<=n?e:i}var ve,xe,De,un,vt,Ke,ln,dn,Ct,oe=new ae({name:"device",onNewAegis:function(e){e.extendBean("platform",this.getPlatform()),e.extendBean("netType",we.unknown),this.getDpi(e),this.refreshNetworkTypeToBean(e)},getDpi:function(e){e.extendBean("vp",Math.round(window.innerWidth)+" * "+Math.round(window.innerHeight)),window.screen&&e.extendBean("sr",Math.round(window.screen.width)+" * "+Math.round(window.screen.height))},getPlatform:function(){var e={android:/\bAndroid\s*([^;]+)/,ios:/\b(iPad|iPhone|iPod)\b.*? OS ([\d_]+)/,windows:/\b(Windows NT)/,macos:/\b(Mac OS)/,linux:/\b(Linux)/i},t=Object.keys(e).find(function(n){return e[n].test(navigator.userAgent)});return t?ke[t]:ke.other},refreshNetworkTypeToBean:function(e){var t=this,n=e.config;n&&(typeof n.getNetworkType=="function"?n.getNetworkType:fn)(function(i){we[i]||(i=we.unknown),e.extendBean("netType",i),t.NetworkRefreshTimer=setTimeout(function(){t.refreshNetworkTypeToBean(e),clearTimeout(t.NetworkRefreshTimer)},1e4)})}}),fn=function(e){var t="",n=navigator.userAgent.match(/NetType\/(\w+)/);n?t=n[1]:navigator.connection&&(t=navigator.connection.effectiveType||navigator.connection.type),e((n=t=t||"unknown",0<=(n=String(n).toLowerCase()).indexOf("4g")?we.net4g:0<=n.indexOf("wifi")?we.wifi:0<=n.indexOf("5g")?we.net5g:0<=n.indexOf("6g")?we.net6g:0<=n.indexOf("3g")?we.net3g:0<=n.indexOf("2g")?we.net2g:we.unknown))},si=window.WebSocket,Ce=[],ai={construct:function(e,t){var n=new e(t[0],t[1]);return n.originSend=n.send,n.addEventListener("error",function(a){var a=(a==null?void 0:a.currentTarget)||{},u=a.url,f=a.readyState;Ce!=null&&Ce.forEach(function(y){y=y.onErr,y!=null&&y({msg:"\u65E0\u6CD5\u83B7\u77E5\u5177\u4F53\u9519\u8BEF\u4FE1\u606F\uFF0C\u9700\u5728\u6D4F\u89C8\u5668\u63A7\u5236\u53F0\u67E5\u770B\uFF01",readyState:f,connectUrl:u})})}),Object.defineProperty(n,"send",{get:function(){return function(u){(a=n.originSend)!=null&&a.call(n,u);var a=n.readyState,u=WebSocket.OPEN,f=WebSocket.CLOSED,y=WebSocket.CONNECTING,b=WebSocket.CLOSING;if(a!==u){var R={readyState:a,connectUrl:n.url};switch(a){case f:Ce.forEach(function(l){l=l.sendErr,l!=null&&l(m({msg:"\u6D88\u606F\u53D1\u9001\u5931\u8D25\uFF0C\u8FDE\u63A5\u5DF2\u5173\u95ED\uFF01"},R))});break;case y:Ce.forEach(function(l){(0,l.sendErr)(m({msg:"\u6D88\u606F\u53D1\u9001\u5931\u8D25\uFF0C\u6B63\u5728\u8FDE\u63A5\u4E2D\uFF01"},R))});break;case b:Ce.forEach(function(l){(0,l.sendErr)(m({msg:"\u6D88\u606F\u53D1\u9001\u5931\u8D25\uFF0C\u8FDE\u63A5\u6B63\u5728\u5173\u95ED\uFF01"},R))})}}}}}),n}},hn=new ae({name:"onError"}),ci=hn=new ae({name:"onError",onNewAegis:function(e){this.startListen(e)},startListen:function(e){function t(l){l=l&&K(l.reason),f.publishErrorLog({msg:"PROMISE_ERROR: "+l,level:d.PROMISE_ERROR})}function n(l){if(l=(l==null?void 0:l.target)||(l==null?void 0:l.srcElement)){var S=l.src||l.href,l=l.tagName;if(typeof S=="string"&&l&&!(-1<window.location.href.indexOf(S))){var T={msg:l+" load fail: "+S,level:d.INFO};if(/\.js$/.test(S))T.level=d.SCRIPT_ERROR;else if(/\.css$/.test(S))T.level=d.CSS_ERROR;else switch(l.toLowerCase()){case"script":T.level=d.SCRIPT_ERROR;break;case"link":T.level=d.CSS_ERROR;break;case"img":T.level=d.IMAGE_ERROR;break;case"audio":case"video":T.level=d.MEDIA_ERROR;break;default:return}f.publishErrorLog(T)}}}var i,a,u,f=this,y=window.onerror,b=(window.onerror=function(){for(var l=[],S=0;S<arguments.length;S++)l[S]=arguments[S];f.publishErrorLog({msg:(K(l[0])||"")+" @ ("+(K(l[1])||"")+":"+(l[2]||0)+":"+(l[3]||0)+`)
          
`+K(l[4]||""),level:d.ERROR}),y!=null&&y.call.apply(y,C([window],l))},window.addEventListener("unhandledrejection",t),window.document.addEventListener("error",n,!0),e.lifeCycle.on("destroy",function(){hn.countInstance()===0&&(window.document.removeEventListener("unhandledrejection",t),window.document.removeEventListener("error",n,!0))}),this),R={name:this.name,send:function(l,S){l.addEventListener("loadend",function(){var T,j,V,F,J,N="";this.failType?N=this.failType:this.status?400<=this.status&&(N="error"):N="failed",e.config.hostUrl&&this.aegisUrl&&-1<this.aegisUrl.indexOf(e.config.hostUrl)||!N||(J=l.aegisUrl,T=(T=e.config.api)==null?void 0:T.apiDetail,j=((j=e.config.api)==null?void 0:j.reqHeaders)||[],j=Te(l.aegisXhrReqHeader,j,"req"),F=((F=e.config.api)==null?void 0:F.resHeaders)||[],V=Qe(l.getAllResponseHeaders()),V=Te(V,F,"res"),F=Ve(l.aegisXhrReqHeader),J=te(l.response,e.config.api,{url:J,ctx:l}).code,b.publishErrorLog({msg:"AJAX_ERROR: request "+N+`
                      
req url: `+this.aegisUrl+`
                      
res status: `+(this.status||0)+`
                      
res retcode: `+J+`
                      
res duration: `+(Date.now()-l.aegisXhrStartTime)+`ms
                      
req method: `+this.aegisMethod+`
                      
req param: `+(T?h(S):"")+`
                      
res data: `+(T?(J=(N=l).responseType&&N.responseType!=="text"?"":N.responseText)===null||J===void 0?void 0:J.slice(0,1e3):"")+`
                      `+j+`
                      `+V,level:d.AJAX_ERROR,trace:F}))}),l.addEventListener("timeout",function(){l.failType="timeout"}),l.addEventListener("error",function(){l.failType="error"}),l.addEventListener("abort",function(){l.failType="abort"})}};this.hackXHROptions=R,Xe(this.hackXHROptions),e.config.websocketHack&&(R={key:e.config.id+"-"+this.name,onErr:function(l){var S;(S=f.publishWsErrorLog)!=null&&S.call(f,l)},sendErr:function(l){var S;(S=f.publishWsErrorLog)!=null&&S.call(f,l)}},this.hackWebsocketConfig=R,R=this.hackWebsocketConfig,window.Proxy&&window.WebSocket&&(i=window.WebSocket,window&&!i.isHack&&(a=new Proxy(WebSocket,ai),i.isHack=!0,window.WebSocket=a),u=R,Ce.find(function(l){return l.key===u.key})||u&&Ce.push(u)))},publishErrorLog:function(e){this.$walk(function(t){t.normalLogPipeline(e)})},publishWsErrorLog:function(i){var t=i.connectUrl,n=i.msg,i=i.readyState;this.publishErrorLog({msg:`WEBSOCKET_ERROR: 
              connect: `+t+`
              readyState: `+i+`
              msg: `+n,level:d.WEBSOCKET_ERROR})},destroy:function(){var e,t;this.option.publishErrorLog=function(){},this.option.hackXHROptions&&Ye(this.option.hackXHROptions),this.option.hackWebsocketConfig&&(e=this.option.hackWebsocketConfig,window.WebSocket=si,(t=Ce.findIndex(function(n){return n.key===e.key}))!==-1&&Ce.splice(t,1))}}),pn=(new ae({name:"pagePerformance"}),1),ui=new ae({name:"pagePerformance",onNewAegis:function(e){var t=this;if(Pe())if(ve)this.publish(ve,e);else try{this.getFirstScreenTiming(e,function(n){var i=performance.timing;i&&(ve={dnsLookup:ye(i.domainLookupEnd-i.domainLookupStart),tcp:ye(i.connectEnd-i.connectStart),ssl:ye(i.secureConnectionStart===0?0:i.requestStart-i.secureConnectionStart),ttfb:ye(i.responseStart-i.requestStart),contentDownload:ye(i.responseEnd-i.responseStart),domParse:ye(i.domInteractive-i.domLoading),resourceDownload:ye(i.loadEventStart-i.domInteractive,0,15e3,1070),firstScreenTiming:ye(Math.floor(n),0,6e4)},t.publish(ve,e))})}catch{}},publish:function(e,t){var n=this;t.sendPipeline([function(i,a){var u,f=[];for(u in i)f.push(u+"="+i[u]);var y,b=n.$getConfig(t);if(b)return y=t.config.performanceUrl.indexOf("?")===-1?"?":"&",typeof b.urlHandler=="function"?a({url:t.config.performanceUrl+y+f.join("&")+"&from="+(encodeURIComponent(b.urlHandler())||window.location.href),beanFilter:["from"],type:w.PERFORMANCE,log:i}):a({url:t.config.performanceUrl+y+f.join("&"),type:w.PERFORMANCE,log:i})}],w.PERFORMANCE)(e)},getFirstScreenTiming:function(e,t){e.lifeCycle.on("destroy",function(){b&&clearTimeout(b)});var n=this,i=["script","style","link","br"],a=[],u={},f=new MutationObserver(function(R){var l={roots:[],rootsDomNum:[],time:performance.now()};R.forEach(function(S){S&&S.addedNodes&&S.addedNodes.forEach&&S.addedNodes.forEach(function(T){T.nodeType===1&&(T.hasAttribute("AEGIS-FIRST-SCREEN-TIMING")||T.querySelector("[AEGIS-FIRST-SCREEN-TIMING]"))?(Object.prototype.hasOwnProperty.apply(u,[l.time])||(u[l.time]=[]),u[l.time].push(T)):T.nodeType!==1||i.indexOf(T.nodeName.toLocaleLowerCase())!==-1||n.isEleInArray(T,l.roots)||T.hasAttribute("AEGIS-IGNORE-FIRST-SCREEN-TIMING")||(l.roots.push(T),l.rootsDomNum.push(n.walkAndCount(T)||0))})}),l.roots.length&&a.push(l)}),y=(f.observe(document,{childList:!0,subtree:!0}),function(){var R=0,l=0,S=Object.keys(u).filter(function(T){return u[+T].find(function(j){return n.isInFirstScreen(j)})});S.length?(l=Math.max.apply(null,S),(typeof((S=e.config)==null?void 0:S.pagePerformance)!="object"||(S=e.config.pagePerformance)!=null&&S.firstScreenInfo)&&(e.firstScreenInfo={element:(S=u[l])==null?void 0:S[0],timing:l,markDoms:u})):a.forEach(function(T){for(var j,V=0;V<T.roots.length;V++)T.rootsDomNum[V]>R&&n.isInFirstScreen(T.roots[V])&&(R=T.rootsDomNum[V],l=T.time,(typeof((j=e.config)==null?void 0:j.pagePerformance)!="object"||(j=e.config.pagePerformance)!=null&&j.firstScreenInfo)&&(e.firstScreenInfo={element:T.roots[V],timing:l}))}),a.length=0,Object.keys(u).forEach(function(T){u[T]=u[T].map(function(j){var V={tagName:j.tagName},F=j.attributes;if(!F)return j;for(var J=0;J<F.length;J++){var N=F[J];N.name&&(V[N.name]=j.getAttribute(N.name))}return V})}),!l&&pn?b=setTimeout(function(){return y()},3e3):(f.disconnect(),t!=null&&t(l)),--pn}),b=setTimeout(function(){return y()},3e3)},isEleInArray:function(e,t){return!(!e||e===document.documentElement)&&(t.indexOf(e)!==-1||this.isEleInArray(e.parentElement,t))},isInFirstScreen:function(t){if(!t||typeof t.getBoundingClientRect!="function")return!1;var t=t.getBoundingClientRect(),n=window.innerHeight,i=window.innerWidth;return 0<=t.left&&t.left<i&&0<=t.top&&t.top<n&&0<t.width&&0<t.height},walkAndCount:function(e){var t=0;if(e&&e.nodeType===1){t+=1;var n=e.children;if(n!=null&&n.length)for(var i=0;i<n.length;i++)t+=this.walkAndCount(n[i])}return t}});function mn(){vt=[],De=-1,xe=null,bn(addEventListener)}function gn(e,t){xe||(xe=t,De=e,un=new Date,bn(removeEventListener),vn())}function vn(){var e;0<=De&&De<un-ln&&(e={entryType:"first-input",name:xe.type,target:xe.target,cancelable:xe.cancelable,startTime:xe.timeStamp,processingStart:xe.timeStamp+De},vt.forEach(function(t){t(e)}),vt=[])}function bn(e){["mousedown","keydown","touchstart","pointerdown"].forEach(function(t){return e(t,dn,Ke)})}Ke={passive:!0,capture:!0},ln=new Date,dn=function(e){var t,n,i,a;function u(){gn(n,i),a()}function f(){a()}e.cancelable&&(t=(1e12<e.timeStamp?new Date:performance.now())-e.timeStamp,e.type=="pointerdown"?(n=t,i=e,a=function(){removeEventListener("pointerup",u,Ke),removeEventListener("pointercancel",f,Ke)},addEventListener("pointerup",u,Ke),addEventListener("pointercancel",f,Ke)):gn(t,e))},Ct=document.visibilityState==="hidden"?0:1/0,addEventListener("visibilitychange",function e(t){document.visibilityState==="hidden"&&(Ct=t.timeStamp,removeEventListener("visibilitychange",e,!0))},!0),mn(),self.webVitals={firstInputPolyfill:function(e){vt.push(e),vn()},resetFirstInputPolyfill:mn,get firstHiddenTime(){return Ct}};function je(e,t){return{name:e,value:t===void 0?-1:t,delta:0,entries:[],id:"v1-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}}function bt(e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){if(e==="first-input"&&!("PerformanceEventTiming"in self))return;var n=new PerformanceObserver(function(i){return i.getEntries().map(t)});return n.observe({type:e,buffered:!0}),n}}catch{}}function nt(e){addEventListener("pageshow",function(t){t.persisted&&e(t)},!0)}function qe(e,t,n){var i;return function(){0<=t.value&&(n||ze.has(t)||document.visibilityState==="hidden")&&(t.delta=t.value-(i||0),!t.delta&&i!==void 0||(i=t.value,e(t)))}}function wn(){yt(function(e){e=e.timeStamp,it=e},!0)}function Pt(){return it<0&&((it=self.webVitals.firstHiddenTime)===1/0&&wn(),nt(function(){setTimeout(function(){it=document.visibilityState==="hidden"?0:1/0,wn()},0)})),{get timeStamp(){return it}}}function wt(n){var t=n.name,n=n.value;_n[t]=n}function li(e,t){function n(b){y=b}function i(b){u=u.concat(b)}function a(b,R){f={conds:b=b===void 0?{}:b,params:R=R===void 0?{}:R}}var u=[],f=null,y=null;me.useAsyncPlugin(e,{exportsConstructor:"Flog",onAegisInit:function(b){b.lifeCycle.on("beforeWrite",i),b.lifeCycle.on("uploadLogs",a),b.lifeCycle.on("onConfigChange",n)},onAegisInitAndPluginLoaded:function(b,R){var l,S,T,j,V,F,J=t.dbConfig,J=J===void 0?{}:J,U=t.url,U=U===void 0?me.urls.aegisCollect:U,N=t.offlineLogExp,N=N===void 0?3:N,G=t.id,Y=t.uin,U=((l=b.lifeCycle)!=null&&l.remove("beforeWrite",i),(l=b.lifeCycle)!=null&&l.remove("uploadLogs",a),(l=b.lifeCycle)!=null&&l.remove("onConfigChange",n),Object.assign({lookupUrl:U+"/offlineAuto?id="+G,preservedDay:N,id:G,uin:Y,aid:((l=b.bean)==null?void 0:l.aid)||"",beforeRequest:b.config.beforeRequest,afterRequest:b.config.afterRequest},J,{sessionId:me.sessionID}));try{var z=new R(U);u.forEach(function(ie){z.add(m(m({},ie),{level:ie.level===d.INFO_ALL?d.INFO:ie.level}))}),(S=b.lifeCycle)!=null&&S.on("beforeWrite",function(ie){(ie=ie===void 0?[]:ie).forEach(function(de){z.add(m(m({},de),{level:de.level===d.INFO_ALL?d.INFO:de.level}))})}),(T=b.lifeCycle)!=null&&T.on("uploadLogs",function(ie,de){var Le;ie===void 0&&(ie={}),de===void 0&&(de={}),z.uploadLogs(Object.assign({id:t.id,uin:t.uin,aid:(Le=b.bean)==null?void 0:Le.aid},ie),de)}),(j=b.lifeCycle)!=null&&j.on("onConfigChange",function(ie){z.setConfig(ie)}),(V=b.lifeCycle)!=null&&V.on("destroy",function(){Rn.countInstance()===0&&(u.length=0,typeof((f=null)==z?void 0:z.destroy)=="function"&&z.destroy())}),z.on("PERREVENT",function(ie){b.sendPipeline([function(de,Le){fe={msg:K(de),level:d.INFO};var fe=(fe=Array.isArray(fe)?fe:[fe]).map(function(ee,ot){return Object.getOwnPropertyNames(ee).map(function(Ut){return L(Ut)+"["+ot+"]="+(ee[Ut]===void 0?"":L(ee[Ut]))}).join("&")}).join("&")+(fe.length?"&count="+fe.length:"");Le({type:w.OFFLINE,data:fe,contentType:"application/x-www-form-urlencoded",method:"post",addBean:!1,url:t.url+"?id=893&sessionId="+me.sessionID+"&uin="+t.uin+"&from="+t.id+"&count=1&version=1.36.2",log:de})}],w.OFFLINE)(ie)}),y&&(z.setConfig(y),y=null),f&&((F=b.lifeCycle)!=null&&F.emit("uploadLogs",f.conds,f.params),f=null),b.flog=z}catch(ie){console.log(ie)}}})}var yn,Nt,yt=function(e,t){function n(i){i.type!=="pagehide"&&document.visibilityState!=="hidden"||(e(i),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))}addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},ze=new(typeof WeakSet=="function"?WeakSet:Set),it=-1,_n=(new ae({name:"webVitals"}),{FCP:-1,LCP:-1,FID:-1,CLS:-1}),di=new ae({name:"webVitals",onNewAegis:function(e){if(Pe()&&typeof window.PerformanceObserver=="function"&&typeof performance.getEntriesByName=="function")try{N=wt,Y=Pt(),U=je("FCP"),z=performance.getEntriesByName("first-contentful-paint")[0],ie=z?null:bt("paint",fe),(z||ie)&&(G=qe(N,U,void 0),z&&fe(z),nt(function(ee){U=je("FCP"),G=qe(N,U,void 0),requestAnimationFrame(function(){requestAnimationFrame(function(){U.value=performance.now()-ee.timeStamp,ze.add(U),G()})})})),S=wt,V=Pt(),F=je("LCP"),(J=bt("largest-contentful-paint",Le))&&(T=qe(S,F,void 0),j=function(){ze.has(F)||(J.takeRecords().map(Le),J.disconnect(),ze.add(F),T())},["keydown","click"].forEach(function(ee){addEventListener(ee,j,{once:!0,capture:!0})}),yt(j,!0),nt(function(ee){F=je("LCP"),T=qe(S,F,void 0),requestAnimationFrame(function(){requestAnimationFrame(function(){F.value=performance.now()-ee.timeStamp,ze.add(F),T()})})})),f=wt,y=Pt(),b=je("FID"),R=bt("first-input",de),l=qe(f,b,void 0),R&&yt(function(){R.takeRecords().map(de),R.disconnect()},!0),R||window.webVitals.firstInputPolyfill(de),nt(function(){b=je("FID"),l=qe(f,b,void 0),window.webVitals.resetFirstInputPolyfill(),window.webVitals.firstInputPolyfill(de)}),n=wt,a=je("CLS",0),(u=bt("layout-shift",t))&&(i=qe(n,a,void 0),yt(function(){u.takeRecords().map(t),i()}),nt(function(){a=je("CLS",0),i=qe(n,a,void 0)})),Ze(this.publish.bind(this,e),!0)}catch{}function t(ee){ee.hadRecentInput||(a.value+=ee.value,a.entries.push(ee),i())}var n,i,a,u,f,y,b,R,l,S,T,j,V,F,J,N,G,Y,U,z,ie;function de(ee){ee.startTime<y.timeStamp&&(b.value=ee.processingStart-ee.startTime,b.entries.push(ee),ze.add(b),l())}function Le(ee){var ot=ee.startTime;ot<V.timeStamp&&(F.value=ot,F.entries.push(ee)),T()}function fe(ee){ee.name==="first-contentful-paint"&&(ie&&ie.disconnect(),ee.startTime<Y.timeStamp&&(U.value=ee.startTime,U.entries.push(ee),ze.add(U),G()))}},publish:function(e){e.sendPipeline([function(t,n){var i,a=[];for(i in t)a.push(i+"="+t[i]);var u=e.config.performanceUrl.indexOf("?")===-1?"?":"&";n({url:e.config.webVitalsUrl+u+a.join("&"),type:w.VITALS,log:t,sendBeacon:!0})}],w.VITALS)(_n)},destroy:function(){this.option.publish=function(){}}}),En=0,me=(g(Nt=ge,H=yn=H),Nt.prototype=H===null?Object.create(H):(On.prototype=H.prototype,new On),ge.prototype.getBean=function(e){var t=this;return e===void 0&&(e=[]),""+Object.getOwnPropertyNames(this.bean).filter(function(n){return e.indexOf(n)===-1}).map(function(n){return n==="from"?"from="+t.getCurrentPageUrl():n+"="+t.bean[n]}).join("&")},ge.prototype.getCurrentPageUrl=function(){var e=this.config.pageUrl||location.href;return typeof this.config.urlHandler=="function"&&(e=this.config.urlHandler()),encodeURIComponent(e)},ge.prototype.request=function(e,t,n){var i,a,u,f;if(e&&typeof e.url=="string"&&e.url!==""&&this.bean.id)return f=e.url,e.addBean!==!1&&(f=f+(f.indexOf("?")===-1?"?":"&")+this.getBean(e.beanFilter)),e.url=f,f=e.method||"get",(e=(a=this.config.onBeforeRequest)?a(e,this):e)?e.url?void((e!=null&&e.sendBeacon||this.sendNow)&&typeof(navigator==null?void 0:navigator.sendBeacon)=="function"?navigator.sendBeacon(e.url,e.data):((i=new XMLHttpRequest).sendByAegis=!0,i.addEventListener("readystatechange",function(){i.readyState===4&&(400<=i.status||i.status===0?n!=null&&n(i.response):t!=null&&t(i.response))}),f.toLocaleLowerCase()==="get"?(i.open("get",(a=e.url,u=e.data,typeof a!="string"?"":typeof u=="object"&&u?(f=Object.getOwnPropertyNames(u).map(function(y){var b=u[y];return y+"="+encodeURIComponent(typeof b=="string"?b:JSON.stringify(b))}).join("&").replace(/eval/gi,"evaI"),a+(a.indexOf("?")===-1?"?":"&")+f):a)),i.send()):(i.open("post",e.url),e.contentType&&i.setRequestHeader("Content-Type",e.contentType),typeof e.data=="string"&&(e.data=e.data.replace(/eval/gi,"evaI")),i.send(e.data)))):console.warn("Please handle the parameters reasonably, options.url is necessary"):console.warn("Sending request blocked")},ge.useAsyncPlugin=function(e,t){var a=(t=t===void 0?{}:t).exportsConstructor,n=a===void 0?"aegis-plugin-"+En:a,a=t.onAegisInit,i=a===void 0?function(){}:a,a=t.onAegisInitAndPluginLoaded,u=a===void 0?function(){}:a;if(En+=1,typeof e!="string")throw new TypeError("useAsyncPlugin first param must be string");if(typeof i!="function"||typeof u!="function")throw new TypeError("onAegisInit and onAegisInitAndPluginLoaded must be function");this.use(new ae({name:"asyncPlugin",onNewAegis:function(f){try{i(f),ge.asyncPlugin[e]?u(f,window[ge.asyncPlugin[e]]):(y=e,b=n,R=function(T){T||(ge.asyncPlugin[e]=n,T=window[n],u(f,T))},l=document.createElement("script"),S=document.head,typeof b=="function"&&(R=b,b=""),l.src=y,l.setAttribute("name",b),l.name=b,l.setAttribute("crossorigin","anonymous"),l.crossorigin="anonymous",l.defer=!0,l.hasLoaded=!1,l.onreadystatechange=function(){l.hasLoaded||l.readyState&&l.readyState!=="loaded"&&l.readyState!=="complete"||(l.hasLoaded=!0,typeof R=="function"&&R(!1),setTimeout(function(){S.contains(l)&&S.removeChild(l)}))},l.onload=l.onreadystatechange,l.onerror=function(){typeof R=="function"&&R(!0),setTimeout(function(){S.contains(l)&&S.removeChild(l)})},document.readyState==="complete"?S.appendChild(l):window.addEventListener("load",function(){S.appendChild(l)}))}catch(T){console.log("error on below is caused by "+e+" "),console.error(T)}var y,b,R,l,S}}))},ge.prototype.publishPluginsLogs=function(){var e=ge.installedPlugins.find(function(t){return t.name==="reportAssetSpeed"});e!=null&&e.option.collectNotReportedLog(this)},ge.prototype.uploadLogs=function(e,t){this.lifeCycle.emit("uploadLogs",e=e===void 0?{}:e,t=t===void 0?{}:t)},ge.sessionID="session-"+Date.now(),ge.asyncPlugin={},ge.urls={aegisCollect:"https://aegis.qq.com/collect",flog:"https://cdn-go.cn/vasdev/web_webpersistance_v2/v1.8.2/flog.core.min.js",shadowLog:""},ge),Rn=new ae({name:"offlineLog"}),H=Rn=new ae({name:"offlineLog",onNewAegis:function(e){li(me.urls.flog,e.config)}}),fi=(new ae({name:"spa"}),new ae({name:"spa",init:function(){history.pushState=this.wr("pushState")||history.pushState,history.replaceState=this.wr("replaceState")||history.replaceState;var e=((e=location.href)==null?void 0:e.split("?"))[0];this.$fireUrl=e,this.sendPv=this.sendPv.bind(this),this.onPageChange()},onPageChange:function(){window.addEventListener("replaceState",this.sendPv),window.addEventListener("pushState",this.sendPv),window.addEventListener("popstate",this.sendPv)},wr:function(e){var t=history[e],n="__"+e+"__hasWrittenByTamSpa";return typeof t=="function"&&!history[n]&&(Object.defineProperty(history,n,{value:!0,enumerable:!1}),function(){var i=t.apply(this,arguments),a=null;return typeof Event=="function"?a=new Event(e):(a=document.createEvent("HTMLEvents")).initEvent(e,!1,!0),window.dispatchEvent(a),i})},sendPv:function(){var e=this;setTimeout(function(){var t=location.href,n=((n=location.href)==null?void 0:n.split("?"))[0];n&&n!==e.$fireUrl&&(e.$walk(function(i){i.sendPipeline([function(a,u){u({url:i.config.pvUrl+"?from="+encodeURIComponent(t),beanFilter:["from"],type:w.PV})}],w.PV)(null)}),e.$fireUrl=n)},0)},destroy:function(){window.removeEventListener("replaceState",this.option.sendPv),window.removeEventListener("pushState",this.option.sendPv),window.removeEventListener("popstate",this.option.sendPv)}}));function ge(e){var t,n,i,a,u,f=yn.call(this,e)||this;f.sendNow=!1,f.speedLogPipeline=Ie([Re(f),(a=f.config,u={},function(y,b){var R,l;a.speedSample?(l=typeof a.repeat=="object"?a.repeat:{repeat:a.repeat},R=+l.speed||+l.repeat||5,Array.isArray(y)?(l=y.filter(function(S){var T=!u[S.url]||u[S.url]<R;return u[S.url]=1+~~u[S.url],T})).length&&b(l):(!u[y.url]||u[y.url]<R)&&(u[y.url]=1+~~u[y.url],b(y))):b(y)}),(i=f,function(y,b){fn(function(R){i.extendBean("netType",R),b(y)})}),function(y,b){f.lifeCycle.emit("beforeReportSpeed",y);var R=f.config.beforeReportSpeed;if((y=typeof R=="function"?y.filter(function(l){var S,T,j=R(l)!==!1;return l.type==="fetch"&&l.ret===void 0&&l.payload&&(S=(T=te(l.payload.data.response,f.config.api,{url:l.payload.data.url,ctx:l.payload.data})||{}).code,T=T.isErr,l.ret=S,l.isErr=+T),j}):y).length)return b(y)},function(y){return f.sendPipeline([function(b,R){var l,S,T,j;R({type:w.SPEED,url:""+f.config.speedUrl,method:"post",data:(R=b,l=m(m({},f.bean),{from:f.getCurrentPageUrl()}),T={fetch:[],static:[]},j=new FormData,Array.isArray(R)?R.forEach(function(V){var F=tt(V);T[V.type].push(F)}):(S=tt(R),T[R.type].push(S)),j.append("payload",le(m({duration:T},l))),j),log:b})}],w.SPEED)(y)}]),e.asyncPlugin=!0;try{typeof document!="undefined"&&(e.uin=e.uin||((t=document.cookie.match(/\buin=\D+(\d*)/))!=null?t:[])[1]||((n=document.cookie.match(/\bilive_uin=\D*(\d+)/))!=null?n:[])[1]||""),f.init(e),f.extendBean("sessionId",ge.sessionID),f.extendBean("from",f.getCurrentPageUrl()),typeof document!="undefined"&&f.extendBean("referer",encodeURIComponent(document.referrer||"")),e.ext1&&f.extendBean("ext1",encodeURIComponent(e.ext1)),e.ext2&&f.extendBean("ext2",encodeURIComponent(e.ext2)),e.ext3&&f.extendBean("ext3",encodeURIComponent(e.ext3))}catch(y){console.warn(y),console.log(`%cThe above error occurred in the process of initializing Aegis, which will affect your normal use of Aegis.
It is recommended that you contact us for feedback and thank you for your support.`,"color: red"),f.sendSDKError(y)}return f}function On(){this.constructor=Nt}new ae({name:"ie"});function ue(e){return hi.indexOf(e)!==-1}var hi=window.navigator.userAgent.toLowerCase(),D={},pi=(D.macos=function(){return ue("mac")},D.ios=function(){return D.iphone()||D.ipod()||D.ipad()},D.iphone=function(){return!D.windows()&&ue("iphone")},D.ipod=function(){return ue("ipod")},D.ipad=function(){var e=navigator.platform==="MacIntel"&&1<navigator.maxTouchPoints;return ue("ipad")||e},D.android=function(){return!D.windows()&&ue("android")},D.androidPhone=function(){return D.android()&&ue("mobile")},D.androidTablet=function(){return D.android()&&!ue("mobile")},D.blackberry=function(){return ue("blackberry")||ue("bb10")},D.blackberryPhone=function(){return D.blackberry()&&!ue("tablet")},D.blackberryTablet=function(){return D.blackberry()&&ue("tablet")},D.windows=function(){return ue("windows")},D.windowsPhone=function(){return D.windows()&&ue("phone")},D.windowsTablet=function(){return D.windows()&&ue("touch")&&!D.windowsPhone()},D.fxos=function(){return(ue("(mobile")||ue("(tablet"))&&ue(" rv:")},D.fxosPhone=function(){return D.fxos()&&ue("mobile")},D.fxosTablet=function(){return D.fxos()&&ue("tablet")},D.meego=function(){return ue("meego")},D.cordova=function(){return window.cordova&&location.protocol==="file:"},D.nodeWebkit=function(){return typeof window.process=="object"},D.mobile=function(){return D.androidPhone()||D.iphone()||D.ipod()||D.windowsPhone()||D.blackberryPhone()||D.fxosPhone()||D.meego()},D.tablet=function(){return D.ipad()||D.androidTablet()||D.blackberryTablet()||D.windowsTablet()||D.fxosTablet()},D.desktop=function(){return!D.tablet()&&!D.mobile()},new ae({name:"onClose"}),new ae({name:"onClose",onNewAegis:function(){var e,t=this;D.desktop()?(e=window.onunload,window.onunload=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];t.publishNotReportedLog(),e!=null&&e.call.apply(e,C([window],n))}):Ze(this.publishNotReportedLog.bind(this),!0)},publishNotReportedLog:function(){var e=this;this.$walk(function(t){t.sendNow=!0,t.publishPluginsLogs(),e.publishThrottlePipeLogs(t)})},publishThrottlePipeLogs:function(e){e!=null&&e.speedLogPipeline([]),e!=null&&e.eventPipeline([]),e!=null&&e.customTimePipeline([]),e!=null&&e.normalLogPipeline([])}}));return me.use(ci),me.use(X),me.use(Me),me.use(ui),me.use(di),me.use(kt),me.use(oe),me.use(H),me.use(fi),me.use(pi),me})})(Kt);var Zt=Kt.exports;const Qt=new Zt({id:"ZEn5JcvaJYEW3WbWJP",reportApiSpeed:!0,reportAssetSpeed:!0,spa:!0,hostUrl:"https://rumt-sg.com"});var en;(function(r){r[r.UNSTARTED=-1]="UNSTARTED",r[r.ENDED=0]="ENDED",r[r.PLAYING=1]="PLAYING",r[r.PAUSED=2]="PAUSED",r[r.BUFFERING=3]="BUFFERING",r[r.CUED=5]="CUED"})(en||(en={}));function Zn(){return re(this,void 0,void 0,function*(){return window.YT||(yield Ot("https://www.youtube.com/iframe_api"),yield new Promise(r=>{window.YT.ready(r)})),window.YT})}function Qn(r){const o=St(r);return o.id=o.id||`embed-youtube-${Date.now()}`,o.classList.add("yt-video"),o.classList.add("embed-video"),o}function ei(r){return{width:r.width,height:r.height,videoId:r.videoId||"",playerVars:{rel:0,loop:r.loop?1:0,autoplay:r.autoplay?1:0,playsinline:1,enablejsapi:1,modestbranding:1}}}function ti(r){return{platform:"youtube",player:r,get muted(){return r.isMuted()},set muted(o){o?r.mute():r.unMute()},get volume(){return r.getVolume()/100},set volume(o){r.setVolume(o*100)},get duration(){return r.getDuration()},get currentTime(){return r.getCurrentTime()},set currentTime(o){r.seekTo(o)},play(){return re(this,void 0,void 0,function*(){r.playVideo()})},pause(){r.pauseVideo()},stop(){r.stopVideo()}}}function ni(r){return re(this,void 0,void 0,function*(){const o=yield Zn(),s=Qn(r.element),c=ei(r),p=new o.Player(s.id,c);return ti(p)})}var ii={init:ni};const tn={youtube:ii};class nn{constructor(o){this.intl_url="";const{game_id:s,area_id:c}=o;this.area_id=c,this.game_id=s,this.setAreaId(c)}setAreaId(o){this.area_id=o,this.updateRequestUrl()}emailApply(o,s){return re(this,void 0,void 0,function*(){const c=new URLSearchParams({typeid:o.typeid,sig:o.sig,gameid:this.game_id,ts:String(Math.floor(new Date().getTime()/1e3))}),p=`${this.intl_url}/v1/official/apply?${c.toString()}`;return yield xt({url:p,method:"POST",data:{email:s.email,apply_data:JSON.stringify(s.apply_data)}})})}updateRequestUrl(){const o={prod:`https://${this.area_id}.intlgame.com`,test:"https://test-vas.intlgame.com",dev:"https://test-vas.intlgame.com"};this.intl_url=o[pt]}}const oi={dev:"https://test-common-web.intlgame.com/sdk-cdn/account-api/index.umd.js",test:"https://test-common-web.intlgame.com/sdk-cdn/account-api/index.umd.js",prod:"https://common-web.intlgame.com/sdk-cdn/account-api/index.umd.js"},Se={get_feeds_detail:"/api/gpts.information_feeds_svr.InformationFeedsSvr/GetContentInfoById",get_columns:"/api/gpts.information_feeds_svr.InformationFeedsSvr/GetLabelList",get_backgrounds:"/api/gpts.information_feeds_svr.InformationFeedsSvr/CommunityMediaGetBackGroundBatch",get_reserve_number:"/api/gpts.information_feeds_svr.InformationFeedsSvr/GetReserveNumber",get_cos_upload_url:"/api/gpts.information_feeds_svr.InformationFeedsSvr/GetUploadUrl",tlog_report:"/api/gpts.information_feeds_svr.InformationFeedsSvr/ReportStatInfo",get_random_code:"/api/gpts.information_feeds_svr.InformationFeedsSvr/PreRegister",get_feeds_by_cloumn:"/api/gpts.information_feeds_svr.InformationFeedsSvr/GetContentByLabel",pa_official_apply:"/api/gpts.information_feeds_svr.InformationFeedsSvr/OfficialApply",pa_official_unapply:"/api/gpts.information_feeds_svr.InformationFeedsSvr/OfficialUnEmail",pa_google_recaptcha:"/api/gpts.information_feeds_svr.InformationFeedsSvr/CaptchaVerify"};var mt;(function(r){r.PC_WEB="pc_web",r.INNER_GAME="inner_game",r.PC_INNER="pc_inner_game",r.LANUCH="pc_launcher"})(mt||(mt={}));var on;(function(r){r.NA="na",r.ASIA="asia"})(on||(on={}));var rn;(function(r){r[r.Feeds=0]="Feeds",r[r.Banner=1]="Banner",r[r.Notice=2]="Notice"})(rn||(rn={}));var Ee;(function(r){r[r.Self_Build=0]="Self_Build",r[r.Inner_Link=1]="Inner_Link",r[r.External_Link=2]="External_Link",r[r.Inner_Article=3]="Inner_Article",r[r.Self_Build_Pic=4]="Self_Build_Pic"})(Ee||(Ee={}));var sn;(function(r){r[r.ASC=1]="ASC",r[r.DESC=0]="DESC"})(sn||(sn={}));var an;(function(r){r[r.EMAIL=1]="EMAIL",r[r.PHONE=2]="PHONE"})(an||(an={}));class Lt{constructor(o){const{lang:s,cms_gameid:c,area_id:p,source_type:g=mt.PC_WEB,custom_cms_url:m}=o;this.cms_gameid=c,this.area_id=p,this.private_cms_url=m,this.source_type=g,this.lang=s}static goDetailLink(o,s){var c,p,g;if(!o||!s)throw new Error("no params provided");let m="";const{content_id:C,jump_link_info:L}=o,{target:A,open_type:P="_blank",only_get_location_string:M,extra_query:v={},query_key:O="content_id",father_query_key:E="father_content_id"}=s,_=new URLSearchParams(location.search);if(!A)throw new Error("no targert provided");switch(Object.keys(v).forEach(x=>{_.set(x,String(v[x]))}),Number(L==null?void 0:L.jump_type)){case Ee.Inner_Article:{const x=new URLSearchParams((c=L==null?void 0:L.jump_url)!==null&&c!==void 0?c:"");x.get("parentId")&&_.set(E,(p=x.get("parentId"))!==null&&p!==void 0?p:""),x.get("id")&&_.set(O,(g=x.get("id"))!==null&&g!==void 0?g:""),m=`${A}?${_.toString()}`,M||window.open(m,P);break}case Ee.External_Link:{m=L==null?void 0:L.jump_url,M||window.open(L==null?void 0:L.jump_url,P);break}case Ee.Self_Build_Pic:break;case Ee.Self_Build:case Ee.Inner_Link:default:{_.set(O,C),m=`${A}?${_.toString()}`,M||window.open(m,P);break}}return m}getFeedsDetail(o,s){return re(this,void 0,void 0,function*(){const c=this.getCmsUrl(Se.get_feeds_detail),{father_id_key:p="father_content_id",ignore_father_id:g}=s||{},m=Ae(p),C=m&&!g?Object.assign({father_content_id:m},this.getPreviewArgs()):Object.assign({content_id:o},this.getPreviewArgs());return yield this.request({url:c,method:"POST",data:C})})}useJumpMethod(o,s){console.warn("[deprecated warn]: useJumpMethod is deprecated, use goDetailLink instead");const{jump_type:c,jump_url:p,feed_id:g,external_open_type:m}=o;switch(c){case Ee.Self_Build:case Ee.Inner_Link:{s(g);break}case Ee.Inner_Article:{s(p);break}case Ee.External_Link:{window.open(p,m||"_blank");break}case Ee.Self_Build_Pic:break;default:{s(g);break}}}getColumns(){return re(this,void 0,void 0,function*(){if(this.colums)return this.colums;const o=this.getCmsUrl(Se.get_columns),s=yield this.request({url:o,method:"POST"});return this.colums=s,s})}getFeedsByColumns(o){return re(this,void 0,void 0,function*(){const{offset:s,get_num:c,secondary_label_id:p,primary_label_id:g,content_class:m,sort_by_list:C,use_default_language:L=!1}=o,A=this.getCmsUrl(Se.get_feeds_by_cloumn),P=yield this.request({url:A,method:"POST",data:Object.assign({gameid:this.cms_gameid,offset:s,get_num:c,content_class:m,primary_label_id:g,secondary_label_id:p||"0",use_default_language:L,sort_by_list:C,language:[this.lang]},this.getPreviewArgs())}),{data:M}=P,{info_content:v=[]}=M,O=!L&&(M==null?void 0:M.use_default_language);if(!o.disable_use_default_language&&v.length===0&&!(M!=null&&M.is_finish)&&O){const E=JSON.parse(JSON.stringify(o));return E.use_default_language=M==null?void 0:M.use_default_language,this.getFeedsByColumns(E)}return P})}getBackgroundImg(o){return re(this,void 0,void 0,function*(){const s=this.getCmsUrl(Se.get_backgrounds);return yield this.request({url:s,method:"POST",data:o})})}setExtraBody(o){this.custom_body=o}switchLang(o){this.lang=o,this.reset()}switchArea(o){this.area_id=o,this.reset()}getPreRegUserCount(){return re(this,void 0,void 0,function*(){const o=this.getCmsUrl(Se.get_reserve_number);return yield this.request({url:o,method:"POST",data:{game_id:this.cms_gameid,area_id:this.area_id}})})}getUploadCosUrl(o){return re(this,void 0,void 0,function*(){const s=this.getCmsUrl(Se.get_cos_upload_url);return yield this.request({url:s,method:"POST",data:{name:o,game_id:this.cms_gameid}})})}tlogReport(o){return re(this,void 0,void 0,function*(){const s=this.getCmsUrl(Se.tlog_report);return yield this.request({url:s,method:"POST",data:o})})}getRandomCode(o){return re(this,void 0,void 0,function*(){const s=this.getCmsUrl(Se.get_random_code);return yield this.request({url:s,method:"POST",data:o})})}officialApply(o){return re(this,void 0,void 0,function*(){const s=this.getCmsUrl(Se.pa_official_apply);return yield this.request({url:s,method:"POST",data:{game_id:this.cms_gameid,type_id:o.type_id,apply_data:JSON.stringify(o.apply_data)||"",edata:o.edata||"",email:o.email||"",phone_number:o.phone_number||"",register_id:o.register_id||""}})})}officialUnEmail(o){return re(this,void 0,void 0,function*(){const s=this.getCmsUrl(Se.pa_official_unapply);return yield this.request({url:s,method:"POST",data:{game_id:this.cms_gameid,type_id:o.type_id,email:o.email||""}})})}getColumnByName(o){return re(this,void 0,void 0,function*(){const{data:s}=yield this.getColumns();if((s==null?void 0:s.primary_label_list)&&Array.isArray(s==null?void 0:s.primary_label_list))return s.primary_label_list.find(c=>{const{raw_label_name:p=""}=c;return p.toLowerCase().includes(o.toLowerCase())})})}getCmsVideoInfo(o){var s,c;if(!((s=o==null?void 0:o.video_info)===null||s===void 0)&&s.video_source)try{const{video_source:p,video_cover:g=""}=o==null?void 0:o.video_info,m=new URL(p),C=new URLSearchParams(m.search),L=Boolean(C.get("platform"));return{is_embed:L,video_cover:g,has_video:!0,platform:L?C.get("platform"):"url",vid:L?(c=C.get("videoId"))!==null&&c!==void 0?c:"":p}}catch{return console.error("wrong url format"),{has_video:!1}}return{has_video:!1}}captchaVerify(o){return re(this,void 0,void 0,function*(){const s=this.getCmsUrl(Se.pa_google_recaptcha);return yield this.request({url:s,method:"POST",data:o})})}initDetailPage(o){var s,c,p;return re(this,void 0,void 0,function*(){const{el:g,cms_info:m,isolation_extra_script:C,isolation_extra_style:L,style_isolation:A,isolation_type:P="iframe",content_key:M="content_id",father_content_key:v="father_content_id",video_style:O="height: 40vh; width: 100%;"}=o;let E,_;if(m)_=m;else{if(!Ae(M)&&!Ae(v))throw new Error("no content id provided");const{data:te}=yield this.getFeedsDetail(Ae(M));_=te}const x=St(g),Q=this.getCmsVideoInfo(_);if(Q.has_video){const te=Et();if(Q.is_embed){const h=_t("div",{id:te,style:O});x.appendChild(h),tn[Q.platform].init({element:h,videoId:Q.vid||""})}else{const h=_t("video",{id:te,src:Q.vid,style:O,controls:"controls",playsinline:!0,poster:Q.video_cover});E=h,x.appendChild(h)}}if(A)switch(P){case"shadowdom":{const te=Ht(_.content,{target:x});return{info:_,shadow:te}}default:case"iframe":{const{iframe:te,resize:h}=yield Ft(_.content,{target:x,script:C,styleText:L});return at({idocu:(s=te.contentWindow)===null||s===void 0?void 0:s.document,container:(c=te.contentWindow)===null||c===void 0?void 0:c.document}),{info:_,resize:h,iframe:te,video_el:E}}}return x.innerHTML+=ut((p=_.content)!==null&&p!==void 0?p:""),at({idocu:document,container:x}),{info:_,video_el:E}})}getCmsUrl(o){let s;return this.private_cms_url?(s=this.private_cms_url,`${s}${o}`):(s={dev:"",test:"https://t-sg-community.playerinfinite.com",prod:`https://${this.area_id}-community.playerinfinite.com`}[pt],`${s}${o}`)}reset(){this.colums=void 0}getPreviewArgs(){return Ae("env")==="preview"?{with_off:!0,sign_info:{sign:Ae("sign")||"",timestamp:Number(Ae("ts"))||0,app_key:Ae("app_key")||""}}:{}}request(o){return re(this,void 0,void 0,function*(){const{url:s,method:c,data:p}=o;return xt({url:s,method:c,data:Object.assign(Object.assign({},p),this.custom_body)||Object.assign({},this.custom_body),headers:{"X-GameId":this.cms_gameid,"X-AreaId":this.area_id,"X-Source":this.source_type,"X-Language":this.lang,"Content-Type":"application/json;charset=utf-8"}})})}}class cn{constructor(o){const{game_id:s,area_id:c}=o;this.game_id=s,this.area_id=c,this.status="pending",this._init()}init(){return re(this,void 0,void 0,function*(){switch(this.status){case"fulfilled":return Promise.resolve();case"error":{this._init();break}default:case"pending":return this.throttle_init()}})}share(o){var s;return re(this,void 0,void 0,function*(){return yield this.init(),(s=this.accountApi)===null||s===void 0?void 0:s.share(o)})}getAccountApi(){return re(this,void 0,void 0,function*(){return yield this.init(),this.accountApi})}thirdLogin(o){var s,c;return re(this,void 0,void 0,function*(){yield this.init();const{third_type:p}=o;switch(p){case"apple":case"facebook":case"google":case"line":case"twitter":{const g=yield(s=this.accountApi)===null||s===void 0?void 0:s.thirdAuthorize({third_type:p});delete g.ret,delete g.msg,p==="twitter"&&(g.oauth_token=g.access_token,g.oauth_secret=g.secret,delete g.access_token,delete g.secret);const m=yield(c=this.accountApi)===null||c===void 0?void 0:c.intlAuthorize({third_type:p,channel_info:g});return m.ret!==0?Promise.reject(m):m}}})}_init(){return re(this,void 0,void 0,function*(){this.throttle_init=Bt(()=>re(this,void 0,void 0,function*(){try{yield Ot(oi[pt]),IntlgameAccountApi?(this.accountApi=new IntlgameAccountApi({env:this.area_id,gameID:this.game_id}),this.status="fulfilled"):this.status="error"}catch{this.status="error"}})),this.throttle_init()})}}class ri{constructor(o){var s,c,p,g,m,C,L,A;const{cms_areaid:P,cms_lang:M,cms_gameid:v,custom_cms_url:O,intl_gameid:E,intl_area_id:_,account_area_id:x,source_type:Q=mt.PC_WEB}=o;this.cms_helper=new Lt({lang:M,cms_gameid:v,source_type:Q,custom_cms_url:O,area_id:P}),Qt.reportEvent({name:"cms-helper-init",ext1:`gameid-${v}`,ext2:`lang-${M}`,ext3:`areaid-${P}`}),x&&E&&(this.account_helper=new cn({game_id:E,area_id:x})),E&&_&&(this.intl_helper=new nn({area_id:_,game_id:E})),this.setExtraBody=this.cms_helper.setExtraBody.bind(this.cms_helper),this.swtichArea=this.cms_helper.switchArea.bind(this.cms_helper),this.switchLang=this.cms_helper.switchLang.bind(this.cms_helper),this.tlogReport=this.cms_helper.tlogReport.bind(this.cms_helper),this.getFeedDetail=this.cms_helper.getFeedsDetail.bind(this.cms_helper),this.getFeesDetail=this.cms_helper.getFeedsDetail.bind(this.cms_helper),this.goDetailLink=Lt.goDetailLink.bind(this.cms_helper),this.initDetailPage=this.cms_helper.initDetailPage.bind(this.cms_helper),this.getCmsVideoInfo=this.cms_helper.getCmsVideoInfo.bind(this.cms_helper),this.getColumns=this.cms_helper.getColumns.bind(this.cms_helper),this.getFeedsByColumns=this.cms_helper.getFeedsByColumns.bind(this.cms_helper),this.getBackgroundImg=this.cms_helper.getBackgroundImg.bind(this.cms_helper),this.getColumnByName=this.cms_helper.getColumnByName.bind(this.cms_helper),this.getPreRegUserCount=this.cms_helper.getPreRegUserCount.bind(this.cms_helper),this.getUploadCosUrl=this.cms_helper.getUploadCosUrl.bind(this.cms_helper),this.getRandomCode=this.cms_helper.getRandomCode.bind(this.cms_helper),this.officialApply=this.cms_helper.officialApply.bind(this.cms_helper),this.officialUnEmail=this.cms_helper.officialUnEmail.bind(this.cms_helper),this.captchaVerify=this.cms_helper.captchaVerify.bind(this.cms_helper),this.useJumpMethod=this.cms_helper.useJumpMethod.bind(this.cms_helper),this.emailApply=(c=(s=this.intl_helper)===null||s===void 0?void 0:s.emailApply)===null||c===void 0?void 0:c.bind(this.intl_helper),this.setIntlGameId=(g=(p=this.intl_helper)===null||p===void 0?void 0:p.setAreaId)===null||g===void 0?void 0:g.bind(this.intl_helper),this.thirdLogin=(C=(m=this.account_helper)===null||m===void 0?void 0:m.thirdLogin)===null||C===void 0?void 0:C.bind(this.account_helper),this.share=(A=(L=this.account_helper)===null||L===void 0?void 0:L.share)===null||A===void 0?void 0:A.bind(this.account_helper)}}$.AccountHelper=cn,$.Aegis=Zt,$.CmsHelper=Lt,$.ENV=pt,$.Embed=tn,$.IntlSevice=nn,$.SdkRumReporter=Qt,$.UAParser=rt.exports.UAParser,$.appendScript=Ot,$.createElement=_t,$.createRichTextElement=Ft,$.createRichTextShadowDom=Ht,$.dataURLtoFile=Wt,$.default=ri,$.download=kn,$.getDateTimeStr=ct,$.getFormatDateString=Ln,$.getIframeHeight=qt,$.getMenus=xn,$.getPlainString=An,$.getQuery=Ae,$.getRandomId=Et,$.getSys=Mt,$.handleMenu=at,$.injectElement=St,$.isEmail=Sn,$.isMobile=st,$.processWithInteract=Rt,$.replaceTimeStampTag=ut,$.request=xt,$.supportFile=In,$.throttlePromise=Bt,Object.defineProperties($,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
